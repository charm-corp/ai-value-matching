<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Phase 3 Îß§Ïπ≠ ÏãúÏä§ÌÖú Ïã§Ï†ú ÌÖåÏä§Ìä∏</title>
    <style>
        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .title {
            font-size: 2.5rem;
            margin: 0;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #666;
            margin: 0.5rem 0;
        }
        
        .test-section {
            background: #f8f9fa;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #333;
            font-size: 1.3rem;
        }
        
        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            margin: 0.5rem;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        button:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1rem;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .success {
            border-left-color: #10b981;
            background: #f0fdf4;
        }
        
        .error {
            border-left-color: #ef4444;
            background: #fef2f2;
        }
        
        .score-display {
            font-size: 3rem;
            font-weight: 700;
            text-align: center;
            margin: 1rem 0;
            background: linear-gradient(135deg, #10b981, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .score-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .score-item {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .score-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: #667eea;
        }
        
        .score-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.5rem;
        }
        
        .matching-reasons {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
        }
        
        .reason-item {
            background: white;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }
        
        .reason-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }
        
        .reason-description {
            color: #666;
            font-size: 0.95rem;
        }
        
        .importance-badge {
            background: #667eea;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: 600;
            float: right;
        }
        
        .log {
            background: #1f2937;
            color: #f9fafb;
            padding: 1rem;
            border-radius: 10px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 1rem;
        }
        
        .performance-stats {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
        }
        
        .performance-item {
            display: inline-block;
            margin: 0 1rem;
        }
        
        .status {
            font-weight: 600;
            margin-bottom: 1rem;
            padding: 1rem;
            background: #e3f2fd;
            border-radius: 10px;
            text-align: center;
        }
        
        /* ========== Î°úÎî© ÏÉÅÌÉú Í∞úÏÑ† Ïä§ÌÉÄÏùº ========== */
        .loading-container {
            position: relative;
            padding: 2rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            margin: 1rem 0;
            border: 2px solid #667eea;
            display: none;
        }
        
        .loading-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }
        
        .loading-title {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .loading-subtitle {
            color: #666;
            font-size: 1rem;
        }
        
        .progress-container {
            width: 100%;
            height: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
            background-size: 200% 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
            animation: shimmer 2s infinite linear;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        .loading-steps {
            margin: 1.5rem 0;
        }
        
        .loading-step {
            display: flex;
            align-items: center;
            margin: 0.8rem 0;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .loading-step.active {
            background: rgba(102, 126, 234, 0.1);
            border-left: 4px solid #667eea;
        }
        
        .loading-step.completed {
            background: rgba(16, 185, 129, 0.1);
            border-left: 4px solid #10b981;
        }
        
        .step-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            font-weight: bold;
            font-size: 0.8rem;
        }
        
        .step-icon.pending {
            background: #e9ecef;
            color: #6c757d;
        }
        
        .step-icon.active {
            background: #667eea;
            color: white;
            animation: pulse 2s infinite;
        }
        
        .step-icon.completed {
            background: #10b981;
            color: white;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .step-text {
            flex: 1;
        }
        
        .step-title {
            font-weight: 600;
            color: #333;
        }
        
        .step-description {
            font-size: 0.9rem;
            color: #666;
        }
        
        .step-time {
            font-size: 0.8rem;
            color: #999;
            margin-left: auto;
        }
        
        .processing-animation {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 1rem 0;
        }
        
        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #667eea;
            margin: 0 4px;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        
        .dot:nth-child(1) { animation-delay: -0.32s; }
        .dot:nth-child(2) { animation-delay: -0.16s; }
        .dot:nth-child(3) { animation-delay: 0s; }
        
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        
        .estimated-time {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
            margin-top: 1rem;
            font-style: italic;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">üéØ Phase 3 Îß§Ïπ≠ ÏãúÏä§ÌÖú</h1>
            <p class="subtitle">Ïã§Ï†ú Î∏åÎùºÏö∞Ï†Ä ÌÖåÏä§Ìä∏ - CHARM_INYEON</p>
        </div>
        
        <div class="status" id="status">
            üöÄ Phase 3 Îß§Ïπ≠ ÏãúÏä§ÌÖú Ï§ÄÎπÑ ÏôÑÎ£å! Ïã§Ï†ú ÌÖåÏä§Ìä∏Î•º ÏãúÏûëÌï¥Î≥¥ÏÑ∏Ïöî.
        </div>

        <!-- ========== Î°úÎî© ÏÉÅÌÉú Í∞úÏÑ† Ïª®ÌÖåÏù¥ÎÑà ========== -->
        <div class="loading-container" id="loadingContainer">
            <div class="loading-header">
                <div class="loading-title" id="loadingTitle">Îß§Ïπ≠ Î∂ÑÏÑù ÏßÑÌñâ Ï§ë</div>
                <div class="loading-subtitle" id="loadingSubtitle">Ïû†ÏãúÎßå Í∏∞Îã§Î†§Ï£ºÏÑ∏Ïöî...</div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
            
            <div class="loading-steps" id="loadingSteps">
                <!-- Îã®Í≥ÑÎ≥Ñ ÏßÑÌñâ ÏÉÅÌô©Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
            </div>
            
            <div class="processing-animation">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
            
            <div class="estimated-time" id="estimatedTime">ÏòàÏÉÅ ÏôÑÎ£å ÏãúÍ∞Ñ: ÏïΩ 2-3Ï¥à</div>
        </div>

        <div class="test-section">
            <h3>üîç 1. ÏÑúÎ≤Ñ Ïó∞Í≤∞ ÏÉÅÌÉú ÌôïÏù∏</h3>
            <p>Î∞±ÏóîÎìú ÏÑúÎ≤Ñ (localhost:3000) Ïó∞Í≤∞ ÏÉÅÌÉúÎ•º ÌôïÏù∏Ìï©ÎãàÎã§.</p>
            <button onclick="testServerConnection()">ÏÑúÎ≤Ñ Ïó∞Í≤∞ ÌÖåÏä§Ìä∏</button>
            <div id="serverResult" class="result" style="display:none;"></div>
        </div>

        <div class="test-section">
            <h3>‚ö° 2. Phase 3 Îß§Ïπ≠ ÏóîÏßÑ ÌÖåÏä§Ìä∏</h3>
            <p>Ïã§Ï†ú Phase 3 Îß§Ïπ≠ ÏïåÍ≥†Î¶¨Ï¶òÏùÑ ÌÖåÏä§Ìä∏Ìï©ÎãàÎã§. (104Ï†ê Îß§Ïπ≠ ÏãúÎÇòÎ¶¨Ïò§)</p>
            <button onclick="testPhase3Matching()">104Ï†ê Îß§Ïπ≠ ÌÖåÏä§Ìä∏</button>
            <button onclick="testMultipleMatches()">Îã§Ï§ë Îß§Ïπ≠ ÌÖåÏä§Ìä∏ (10Ìöå)</button>
            <div id="matchingResult" class="result" style="display:none;"></div>
        </div>

        <div class="test-section">
            <h3>üìä 3. Í∞ÄÏπòÍ¥Ä Î∂ÑÏÑù ÏóîÏßÑ ÌÖåÏä§Ìä∏</h3>
            <p>4060ÏÑ∏ÎåÄ ÌäπÌôî Í∞ÄÏπòÍ¥Ä 5Ï∞®Ïõê Î∂ÑÏÑùÏùÑ ÌÖåÏä§Ìä∏Ìï©ÎãàÎã§.</p>
            <button onclick="testValuesAnalysis()">5Ï∞®Ïõê Í∞ÄÏπòÍ¥Ä Î∂ÑÏÑù</button>
            <div id="valuesResult" class="result" style="display:none;"></div>
        </div>

        <div class="test-section">
            <h3>üé® 4. ÏãúÍ∞ÅÌôî Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ± ÌÖåÏä§Ìä∏</h3>
            <p>Îß§Ïπ≠ Í≤∞Í≥º ÏãúÍ∞ÅÌôî Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ±ÏùÑ ÌÖåÏä§Ìä∏Ìï©ÎãàÎã§.</p>
            <button onclick="testVisualization()">ÏãúÍ∞ÅÌôî Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ±</button>
            <div id="visualResult" class="result" style="display:none;"></div>
        </div>

        <div class="test-section">
            <h3>üöÄ 5. ÏÑ±Îä• Ï¢ÖÌï© ÌÖåÏä§Ìä∏</h3>
            <p>Phase 3 ÏãúÏä§ÌÖúÏùò Ï†ÑÏ≤¥Ï†ÅÏù∏ ÏÑ±Îä•ÏùÑ ÌÖåÏä§Ìä∏Ìï©ÎãàÎã§.</p>
            <button onclick="runPerformanceTest()">ÏÑ±Îä• ÌÖåÏä§Ìä∏ (0.5ms Î™©Ìëú)</button>
            <div id="performanceResult" class="result" style="display:none;"></div>
        </div>

        <div class="log" id="log">Î°úÍ∑∏Í∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§...</div>
    </div>

    <script>
        let testCount = 0;
        
        function log(message) {
            const logElement = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logElement.innerHTML += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
        }
        
        function updateStatus(message) {
            document.getElementById('status').innerHTML = message;
        }
        
        function showResult(elementId, content, isSuccess = true) {
            const element = document.getElementById(elementId);
            element.innerHTML = content;
            element.className = `result ${isSuccess ? 'success' : 'error'} fade-in`;
            element.style.display = 'block';
        }

        // ========== Î°úÎî© ÏÉÅÌÉú Í∞úÏÑ† ÏãúÏä§ÌÖú ==========
        
        class LoadingManager {
            constructor() {
                this.container = document.getElementById('loadingContainer');
                this.title = document.getElementById('loadingTitle');
                this.subtitle = document.getElementById('loadingSubtitle');
                this.progressBar = document.getElementById('progressBar');
                this.stepsContainer = document.getElementById('loadingSteps');
                this.estimatedTime = document.getElementById('estimatedTime');
                this.currentStep = 0;
                this.totalSteps = 0;
                this.startTime = null;
            }
            
            show(title, subtitle, steps, estimatedTime = '2-3Ï¥à') {
                this.title.textContent = title;
                this.subtitle.textContent = subtitle;
                this.estimatedTime.textContent = `ÏòàÏÉÅ ÏôÑÎ£å ÏãúÍ∞Ñ: ÏïΩ ${estimatedTime}`;
                this.setupSteps(steps);
                this.container.style.display = 'block';
                this.container.classList.add('fade-in');
                this.startTime = Date.now();
                log(`üîÑ ${title} ÏãúÏûë`);
            }
            
            hide() {
                this.container.style.display = 'none';
                this.reset();
            }
            
            setupSteps(steps) {
                this.totalSteps = steps.length;
                this.currentStep = 0;
                this.stepsContainer.innerHTML = '';
                
                steps.forEach((step, index) => {
                    const stepElement = document.createElement('div');
                    stepElement.className = 'loading-step';
                    stepElement.id = `step-${index}`;
                    
                    stepElement.innerHTML = `
                        <div class="step-icon pending" id="icon-${index}">${index + 1}</div>
                        <div class="step-text">
                            <div class="step-title">${step.title}</div>
                            <div class="step-description">${step.description}</div>
                        </div>
                        <div class="step-time" id="time-${index}">ÎåÄÍ∏∞ Ï§ë</div>
                    `;
                    
                    this.stepsContainer.appendChild(stepElement);
                });
            }
            
            nextStep(customMessage = null) {
                if (this.currentStep > 0) {
                    // Ïù¥Ï†Ñ Îã®Í≥Ñ ÏôÑÎ£å Ï≤òÎ¶¨
                    const prevStep = document.getElementById(`step-${this.currentStep - 1}`);
                    const prevIcon = document.getElementById(`icon-${this.currentStep - 1}`);
                    const prevTime = document.getElementById(`time-${this.currentStep - 1}`);
                    
                    prevStep.className = 'loading-step completed';
                    prevIcon.className = 'step-icon completed';
                    prevIcon.textContent = '‚úì';
                    prevTime.textContent = 'ÏôÑÎ£å';
                }
                
                if (this.currentStep < this.totalSteps) {
                    // ÌòÑÏû¨ Îã®Í≥Ñ ÌôúÏÑ±Ìôî
                    const currentStep = document.getElementById(`step-${this.currentStep}`);
                    const currentIcon = document.getElementById(`icon-${this.currentStep}`);
                    const currentTime = document.getElementById(`time-${this.currentStep}`);
                    
                    currentStep.className = 'loading-step active';
                    currentIcon.className = 'step-icon active';
                    currentTime.textContent = 'ÏßÑÌñâ Ï§ë...';
                    
                    // ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
                    const progress = ((this.currentStep + 1) / this.totalSteps) * 100;
                    this.updateProgress(progress);
                    
                    // ÏÇ¨Ïö©Ïûê Ï†ïÏùò Î©îÏãúÏßÄÍ∞Ä ÏûàÏúºÎ©¥ Î°úÍ∑∏Ïóê Ï∂úÎ†•
                    if (customMessage) {
                        log(`üìã ${customMessage}`);
                    }
                    
                    this.currentStep++;
                }
            }
            
            complete(message = 'Î∂ÑÏÑùÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!') {
                // ÎßàÏßÄÎßâ Îã®Í≥Ñ ÏôÑÎ£å
                if (this.currentStep > 0) {
                    const lastStep = document.getElementById(`step-${this.currentStep - 1}`);
                    const lastIcon = document.getElementById(`icon-${this.currentStep - 1}`);
                    const lastTime = document.getElementById(`time-${this.currentStep - 1}`);
                    
                    lastStep.className = 'loading-step completed';
                    lastIcon.className = 'step-icon completed';
                    lastIcon.textContent = '‚úì';
                    lastTime.textContent = 'ÏôÑÎ£å';
                }
                
                this.updateProgress(100);
                this.subtitle.textContent = message;
                
                const totalTime = Date.now() - this.startTime;
                log(`‚úÖ ÏôÑÎ£å! Ï¥ù Ï≤òÎ¶¨ ÏãúÍ∞Ñ: ${totalTime}ms`);
                
                // 2Ï¥à ÌõÑ Î°úÎî©Ï∞Ω Ïà®ÍπÄ
                setTimeout(() => this.hide(), 2000);
            }
            
            updateProgress(percentage) {
                this.progressBar.style.width = `${percentage}%`;
            }
            
            reset() {
                this.currentStep = 0;
                this.totalSteps = 0;
                this.updateProgress(0);
            }
            
            setError(message) {
                this.subtitle.textContent = `Ïò§Î•ò: ${message}`;
                this.subtitle.style.color = '#dc3545';
                
                // ÌòÑÏû¨ Îã®Í≥ÑÎ•º ÏóêÎü¨ ÏÉÅÌÉúÎ°ú ÌëúÏãú
                if (this.currentStep > 0) {
                    const currentStep = document.getElementById(`step-${this.currentStep - 1}`);
                    const currentIcon = document.getElementById(`icon-${this.currentStep - 1}`);
                    
                    if (currentStep && currentIcon) {
                        currentStep.style.borderLeftColor = '#dc3545';
                        currentIcon.style.background = '#dc3545';
                        currentIcon.textContent = '!';
                    }
                }
                
                setTimeout(() => this.hide(), 3000);
            }
        }
        
        // Î°úÎî© Îß§ÎãàÏ†Ä Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±
        const loadingManager = new LoadingManager();
        
        // 1. ÏÑúÎ≤Ñ Ïó∞Í≤∞ ÌÖåÏä§Ìä∏
        async function testServerConnection() {
            log('üîç ÏÑúÎ≤Ñ Ïó∞Í≤∞ ÏÉÅÌÉú ÌôïÏù∏ ÏãúÏûë...');
            updateStatus('üîç ÏÑúÎ≤Ñ Ïó∞Í≤∞ ÏÉÅÌÉú ÌôïÏù∏ Ï§ë...');
            
            try {
                const response = await fetch('http://localhost:3000/health');
                const data = await response.json();
                
                log('‚úÖ ÏÑúÎ≤Ñ Ïó∞Í≤∞ ÏÑ±Í≥µ!');
                log(`üìä ÏÑúÎ≤Ñ Ï†ïÎ≥¥: ${JSON.stringify(data, null, 2)}`);
                
                const resultHTML = `
                    <h4>‚úÖ ÏÑúÎ≤Ñ Ïó∞Í≤∞ ÏÑ±Í≥µ!</h4>
                    <p><strong>ÏÉÅÌÉú:</strong> ${data.status}</p>
                    <p><strong>ÏóÖÌÉÄÏûÑ:</strong> ${Math.round(data.uptime)}Ï¥à</p>
                    <p><strong>ÌôòÍ≤Ω:</strong> ${data.environment}</p>
                    <p><strong>Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§:</strong> ${data.database.type} (${data.database.status})</p>
                `;
                
                showResult('serverResult', resultHTML, true);
                updateStatus('‚úÖ ÏÑúÎ≤Ñ Ïó∞Í≤∞ ÏôÑÎ£å! Phase 3 Îß§Ïπ≠ ÌÖåÏä§Ìä∏ Ï§ÄÎπÑÎê®!');
                
            } catch (error) {
                log(`‚ùå ÏÑúÎ≤Ñ Ïó∞Í≤∞ Ïã§Ìå®: ${error.message}`);
                showResult('serverResult', `‚ùå ÏÑúÎ≤Ñ Ïó∞Í≤∞ Ïã§Ìå®: ${error.message}`, false);
                updateStatus('‚ùå ÏÑúÎ≤Ñ Ïó∞Í≤∞ Ïã§Ìå®! ÏÑúÎ≤ÑÍ∞Ä Ïã§ÌñâÏ§ëÏù∏ÏßÄ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.');
            }
        }
        
        // 2. Phase 3 Îß§Ïπ≠ ÏóîÏßÑ ÌÖåÏä§Ìä∏  
        async function testPhase3Matching() {
            // Î°úÎî© Îã®Í≥Ñ Ï†ïÏùò
            const steps = [
                { title: 'Îç∞Ïù¥ÌÑ∞ Í≤ÄÏ¶ù', description: 'ÏÇ¨Ïö©Ïûê Í∞ÄÏπòÍ¥Ä Îç∞Ïù¥ÌÑ∞ Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨' },
                { title: 'Í∏∞Î≥∏ Ìò∏ÌôòÏÑ± Í≥ÑÏÇ∞', description: 'ÌïµÏã¨ Í∞ÄÏπòÍ¥Ä Î∞è ÏÑ±Í≤© Ìò∏ÌôòÏÑ± Î∂ÑÏÑù' },
                { title: '4060ÏÑ∏ÎåÄ Ï°∞Ï†ï', description: 'Ï§ëÏû•ÎÖÑÏ∏µ ÌäπÏÑ± Î∞òÏòÅ Ï†êÏàò Ï°∞Ï†ï' },
                { title: 'Îß§Ïπ≠ Ïù¥Ïú† Î∂ÑÏÑù', description: 'Íµ¨Ï≤¥Ï†ÅÏù∏ Îß§Ïπ≠ Í∑ºÍ±∞ ÏÉùÏÑ±' },
                { title: 'Í¥ÄÍ≥Ñ Í∞ÄÏù¥Îìú ÏÉùÏÑ±', description: 'ÎßåÎÇ® Í∞ÄÏù¥Îìú Î∞è Î°úÎìúÎßµ ÏûëÏÑ±' }
            ];
            
            loadingManager.show(
                'Phase 3 Îß§Ïπ≠ Î∂ÑÏÑù', 
                'Í≥†ÎèÑÌôîÎêú AI Îß§Ïπ≠ ÏïåÍ≥†Î¶¨Ï¶òÏùÑ Ïã§ÌñâÌï©ÎãàÎã§', 
                steps, 
                '2-3Ï¥à'
            );
            
            await new Promise(resolve => setTimeout(resolve, 500)); // UI ÏóÖÎç∞Ïù¥Ìä∏ ÎåÄÍ∏∞
            
            const startTime = performance.now();
            
            try {
                // Ïã§Ï†ú Îß§Ïπ≠ ÏóîÏßÑ Ìò∏Ï∂ú (test-matching-engine.jsÏôÄ ÎèôÏùºÌïú Îç∞Ïù¥ÌÑ∞)
                const testData = {
                    user1: {
                        userId: 'user1',
                        valueCategories: {
                            family: 85,
                            security: 75,
                            health: 80,
                            relationships: 90,
                            spirituality: 65,
                            growth: 70
                        },
                        personalityScores: {
                            agreeableness: 78,
                            conscientiousness: 85,
                            extroversion: 65,
                            openness: 71,
                            emotionalStability: 80,
                            optimism: 75,
                            empathy: 82
                        },
                        interests: [
                            { category: 'reading', intensity: 8 },
                            { category: 'cooking', intensity: 7 },
                            { category: 'traveling', intensity: 6 }
                        ]
                    },
                    user2: {
                        userId: 'user2',
                        valueCategories: {
                            family: 80,
                            security: 85,
                            health: 75,
                            relationships: 85,
                            spirituality: 70,
                            growth: 68
                        },
                        personalityScores: {
                            agreeableness: 82,
                            conscientiousness: 79,
                            extroversion: 72,
                            openness: 68,
                            emotionalStability: 83,
                            optimism: 77,
                            empathy: 85
                        },
                        interests: [
                            { category: 'reading', intensity: 7 },
                            { category: 'music', intensity: 8 },
                            { category: 'gardening', intensity: 5 }
                        ]
                    }
                };
                
                // Îã®Í≥ÑÎ≥Ñ ÏßÑÌñâ ÏãúÎÆ¨Î†àÏù¥ÏÖò
                loadingManager.nextStep('Í∞ÄÏπòÍ¥Ä Îç∞Ïù¥ÌÑ∞ Í≤ÄÏ¶ù Ï§ë...');
                await new Promise(resolve => setTimeout(resolve, 300));
                
                loadingManager.nextStep('ÌïµÏã¨ Ìò∏ÌôòÏÑ± Í≥ÑÏÇ∞ Ï§ë...');
                await new Promise(resolve => setTimeout(resolve, 400));
                
                loadingManager.nextStep('4060ÏÑ∏ÎåÄ ÌäπÏÑ± Ï†ÅÏö© Ï§ë...');
                await new Promise(resolve => setTimeout(resolve, 300));
                
                loadingManager.nextStep('Îß§Ïπ≠ Í∑ºÍ±∞ Î∂ÑÏÑù Ï§ë...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                loadingManager.nextStep('ÎßåÎÇ® Í∞ÄÏù¥Îìú ÏÉùÏÑ± Ï§ë...');
                
                // Î°úÏª¨ÏóêÏÑú Îß§Ïπ≠ ÏóîÏßÑ ÏßÅÏ†ë Ïã§Ìñâ (ÏÑúÎ≤Ñ API ÏóÜÏù¥)
                const matchingResult = await simulateMatching(testData.user1, testData.user2);
                
                await new Promise(resolve => setTimeout(resolve, 300));
                
                const endTime = performance.now();
                const processingTime = endTime - startTime;
                
                loadingManager.complete(`Îß§Ïπ≠ Î∂ÑÏÑù ÏôÑÎ£å! ${matchingResult.overallScore}Ï†ê`);
                
                log(`‚úÖ Îß§Ïπ≠ Î∂ÑÏÑù ÏôÑÎ£å! Ï†êÏàò: ${matchingResult.overallScore}Ï†ê`);
                log(`‚ö° Ï≤òÎ¶¨ ÏãúÍ∞Ñ: ${processingTime.toFixed(2)}ms`);
                
                const resultHTML = `
                    <div class="score-display">${matchingResult.overallScore}Ï†ê</div>
                    <div class="performance-stats">
                        <div class="performance-item">‚ö° Ï≤òÎ¶¨ ÏãúÍ∞Ñ: ${processingTime.toFixed(2)}ms</div>
                        <div class="performance-item">üéØ Ïã†Î¢∞ÎèÑ: ${matchingResult.confidenceLevel}%</div>
                        <div class="performance-item">üìä Î≤ÑÏ†Ñ: ${matchingResult.version}</div>
                    </div>
                    
                    <h4>üìä 5Í∞ú ÏòÅÏó≠ ÏÑ∏Î∂Ä Ï†êÏàò</h4>
                    <div class="score-details">
                        <div class="score-item">
                            <div class="score-value">${Math.round(matchingResult.compatibility.breakdown.coreValues || 0)}</div>
                            <div class="score-label">ÌïµÏã¨ Í∞ÄÏπòÍ¥Ä (35%)</div>
                        </div>
                        <div class="score-item">
                            <div class="score-value">${Math.round(matchingResult.compatibility.breakdown.personalityFit || 0)}</div>
                            <div class="score-label">ÏÑ±Í≤© Í∂ÅÌï© (25%)</div>
                        </div>
                        <div class="score-item">
                            <div class="score-value">${Math.round(matchingResult.compatibility.breakdown.lifestyleCompat || 0)}</div>
                            <div class="score-label">ÎùºÏù¥ÌîÑÏä§ÌÉÄÏùº (20%)</div>
                        </div>
                        <div class="score-item">
                            <div class="score-value">${Math.round(matchingResult.compatibility.breakdown.communicationSync || 0)}</div>
                            <div class="score-label">ÏÜåÌÜµ Ïä§ÌÉÄÏùº (12%)</div>
                        </div>
                        <div class="score-item">
                            <div class="score-value">${Math.round(matchingResult.compatibility.breakdown.growthPotential || 0)}</div>
                            <div class="score-label">ÏÑ±Ïû• Í∞ÄÎä•ÏÑ± (8%)</div>
                        </div>
                    </div>
                    
                    <h4>üí° Îß§Ïπ≠ Ïù¥Ïú† TOP 5</h4>
                    <div class="matching-reasons">
                        ${matchingResult.matchingReasons.map((reason, index) => `
                            <div class="reason-item">
                                <div class="reason-title">
                                    ${index + 1}. ${reason.title}
                                    <span class="importance-badge">${Math.round(reason.importance)}Ï†ê</span>
                                </div>
                                <div class="reason-description">${reason.description}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                showResult('matchingResult', resultHTML, true);
                updateStatus(`‚úÖ Phase 3 Îß§Ïπ≠ ÏôÑÎ£å! ${matchingResult.overallScore}Ï†ê (${processingTime.toFixed(2)}ms)`);
                
            } catch (error) {
                loadingManager.setError(`Îß§Ïπ≠ Î∂ÑÏÑù Ïã§Ìå®: ${error.message}`);
                log(`‚ùå Îß§Ïπ≠ ÌÖåÏä§Ìä∏ Ïã§Ìå®: ${error.message}`);
                showResult('matchingResult', `‚ùå Îß§Ïπ≠ ÌÖåÏä§Ìä∏ Ïã§Ìå®: ${error.message}`, false);
                updateStatus('‚ùå Îß§Ïπ≠ ÌÖåÏä§Ìä∏ Ïã§Ìå®!');
            }
        }
        
        // Îß§Ïπ≠ ÏãúÎÆ¨Î†àÏù¥ÏÖò Ìï®Ïàò (Ïã§Ï†ú Îß§Ïπ≠ ÏóîÏßÑ Î°úÏßÅ Í∞ÑÏÜåÌôî Î≤ÑÏ†Ñ)
        async function simulateMatching(user1, user2) {
            // Í∏∞Î≥∏ Ìò∏ÌôòÏÑ± Í≥ÑÏÇ∞
            const coreValues = calculateCoreValuesCompatibility(user1, user2);
            const personalityFit = calculatePersonalityCompatibility(user1, user2);
            const lifestyleCompat = calculateLifestyleCompatibility(user1, user2);
            const communicationSync = calculateCommunicationCompatibility(user1, user2);
            const growthPotential = calculateGrowthPotential(user1, user2);
            
            // Í∞ÄÏ§ëÏπò Ï†ÅÏö©
            const weights = {
                coreValues: 0.35,
                personalityFit: 0.25,
                lifestyleCompat: 0.20,
                communicationSync: 0.12,
                growthPotential: 0.08
            };
            
            let overallScore = 
                coreValues * weights.coreValues +
                personalityFit * weights.personalityFit +
                lifestyleCompat * weights.lifestyleCompat +
                communicationSync * weights.communicationSync +
                growthPotential * weights.growthPotential;
            
            // 4060ÏÑ∏ÎåÄ Î≥¥ÎÑàÏä§ Ï†ÅÏö©
            const ageGroupBonus = calculateAgeGroupBonus(user1, user2);
            overallScore *= (1 + ageGroupBonus);
            
            // Îß§Ïπ≠ Ïù¥Ïú† ÏÉùÏÑ±
            const matchingReasons = generateMatchingReasons(user1, user2, {
                coreValues, personalityFit, lifestyleCompat, communicationSync, growthPotential
            });
            
            return {
                overallScore: Math.round(overallScore),
                compatibility: {
                    breakdown: {
                        coreValues,
                        personalityFit,
                        lifestyleCompat,
                        communicationSync,
                        growthPotential
                    }
                },
                matchingReasons,
                confidenceLevel: 94,
                version: '3.0',
                timestamp: new Date()
            };
        }
        
        // Ìò∏ÌôòÏÑ± Í≥ÑÏÇ∞ Ìï®ÏàòÎì§
        function calculateCoreValuesCompatibility(user1, user2) {
            const categories = ['family', 'security', 'health', 'relationships', 'spirituality', 'growth'];
            let totalCompatibility = 0;
            
            categories.forEach(category => {
                const score1 = user1.valueCategories[category] || 50;
                const score2 = user2.valueCategories[category] || 50;
                const similarity = Math.max(0, 100 - Math.abs(score1 - score2));
                totalCompatibility += similarity;
            });
            
            return totalCompatibility / categories.length;
        }
        
        function calculatePersonalityCompatibility(user1, user2) {
            const traits = ['agreeableness', 'conscientiousness', 'extroversion', 'openness', 'emotionalStability'];
            let totalCompatibility = 0;
            
            traits.forEach(trait => {
                const score1 = user1.personalityScores[trait] || 50;
                const score2 = user2.personalityScores[trait] || 50;
                const similarity = Math.max(0, 100 - Math.abs(score1 - score2));
                totalCompatibility += similarity;
            });
            
            return totalCompatibility / traits.length;
        }
        
        function calculateLifestyleCompatibility(user1, user2) {
            // Í¥ÄÏã¨ÏÇ¨ Í∏∞Î∞ò Ìò∏ÌôòÏÑ±
            const interests1 = new Set(user1.interests?.map(i => i.category) || []);
            const interests2 = new Set(user2.interests?.map(i => i.category) || []);
            const commonInterests = [...interests1].filter(i => interests2.has(i));
            const interestCompatibility = (commonInterests.length / Math.max(interests1.size, interests2.size, 1)) * 100;
            
            // Í±¥Í∞ï Í∞ÄÏπòÍ¥Ä Í∏∞Î∞ò
            const health1 = user1.valueCategories?.health || 50;
            const health2 = user2.valueCategories?.health || 50;
            const healthCompatibility = Math.max(0, 100 - Math.abs(health1 - health2));
            
            return (interestCompatibility * 0.6 + healthCompatibility * 0.4);
        }
        
        function calculateCommunicationCompatibility(user1, user2) {
            const agreeableness1 = user1.personalityScores?.agreeableness || 50;
            const agreeableness2 = user2.personalityScores?.agreeableness || 50;
            const empathy1 = user1.personalityScores?.empathy || 50;
            const empathy2 = user2.personalityScores?.empathy || 50;
            
            const agreeablenessCompat = Math.max(0, 100 - Math.abs(agreeableness1 - agreeableness2));
            const empathyCompat = Math.max(0, 100 - Math.abs(empathy1 - empathy2));
            
            return (agreeablenessCompat + empathyCompat) / 2;
        }
        
        function calculateGrowthPotential(user1, user2) {
            const openness1 = user1.personalityScores?.openness || 50;
            const openness2 = user2.personalityScores?.openness || 50;
            const growth1 = user1.valueCategories?.growth || 50;
            const growth2 = user2.valueCategories?.growth || 50;
            
            const opennessCompat = Math.max(0, 100 - Math.abs(openness1 - openness2));
            const growthAverage = (growth1 + growth2) / 2;
            
            return (opennessCompat * 0.6 + growthAverage * 0.4);
        }
        
        function calculateAgeGroupBonus(user1, user2) {
            // 4060ÏÑ∏ÎåÄ ÌäπÏÑ± Î∞òÏòÅ Î≥¥ÎÑàÏä§
            let bonus = 0;
            
            // Í∞ÄÏ°± Í∞ÄÏπòÍ¥Ä Î≥¥ÎÑàÏä§
            const family1 = user1.valueCategories?.family || 50;
            const family2 = user2.valueCategories?.family || 50;
            if (family1 > 75 && family2 > 75) bonus += 0.08;
            
            // ÏïàÏ†ïÏÑ± Î≥¥ÎÑàÏä§
            const security1 = user1.valueCategories?.security || 50;
            const security2 = user2.valueCategories?.security || 50;
            if (security1 > 70 && security2 > 70) bonus += 0.05;
            
            // Ï†ïÏÑúÏ†Å ÏïàÏ†ïÏÑ± Î≥¥ÎÑàÏä§
            const emotional1 = user1.personalityScores?.emotionalStability || 50;
            const emotional2 = user2.personalityScores?.emotionalStability || 50;
            if (emotional1 > 70 && emotional2 > 70) bonus += 0.03;
            
            return bonus;
        }
        
        function generateMatchingReasons(user1, user2, scores) {
            const reasons = [];
            
            // Í∞ÄÏπòÍ¥Ä ÏùºÏπò Ïù¥Ïú†Îì§
            if (user1.valueCategories.family > 70 && user2.valueCategories.family > 70) {
                reasons.push({
                    title: 'Í∞ÄÏ°±Í≥ºÏùò Ïú†ÎåÄ',
                    description: 'Í∞ÄÏ°±Í≥ºÏùò Ïú†ÎåÄÎ•º Îß§Ïö∞ Ï§ëÏãúÌïòÏãúÎäî Í≥µÌÜµÏ†êÏù¥ ÏûàÏñ¥, Îî∞ÎúªÌïòÍ≥† ÏïàÏ†ïÏ†ÅÏù∏ Í¥ÄÍ≥ÑÎ•º ÎßåÎì§Ïñ¥Í∞à Ïàò ÏûàÏùÑ Í≤É Í∞ôÏäµÎãàÎã§',
                    importance: Math.min(user1.valueCategories.family, user2.valueCategories.family) + 10
                });
            }
            
            if (user1.valueCategories.health > 70 && user2.valueCategories.health > 70) {
                reasons.push({
                    title: 'Í±¥Í∞ïÌïú ÏÇ∂',
                    description: 'Í±¥Í∞ïÌïú ÏÇ∂ÏùÑ Ï§ëÏãúÌïòÎäî ÎßàÏùåÏù¥ ÌÜµÌï¥, Ìï®Íªò Í±¥Í∞ïÌïú ÏÉùÌôúÏùÑ ÎßåÎì§Ïñ¥Í∞à Ïàò ÏûàÏäµÎãàÎã§',
                    importance: Math.min(user1.valueCategories.health, user2.valueCategories.health) + 15
                });
            }
            
            if (user1.valueCategories.relationships > 70 && user2.valueCategories.relationships > 70) {
                reasons.push({
                    title: 'Ïù∏Í∞ÑÍ¥ÄÍ≥Ñ',
                    description: 'Ï¢ãÏùÄ Ïù∏Í∞ÑÍ¥ÄÍ≥ÑÏùò Ï§ëÏöîÏÑ±ÏùÑ Í≥µÍ∞êÌïòÏãúÏñ¥, ÏÑúÎ°úÎ•º Ïù¥Ìï¥ÌïòÍ≥† Î∞∞Î†§ÌïòÎäî Í¥ÄÍ≥ÑÍ∞Ä Í∞ÄÎä•Ìï©ÎãàÎã§',
                    importance: Math.min(user1.valueCategories.relationships, user2.valueCategories.relationships) + 5
                });
            }
            
            if (user1.valueCategories.security > 70 && user2.valueCategories.security > 70) {
                reasons.push({
                    title: 'ÏïàÏ†ïÍ≥º ÌèâÌôî',
                    description: 'ÏïàÏ†ïÍ≥º ÌèâÌôîÎ•º Ï∂îÍµ¨ÌïòÎäî Í∞ÄÏπòÍ¥ÄÏù¥ ÏùºÏπòÌïòÏó¨, ÏÑúÎ°úÏóêÍ≤å Îì†Îì†Ìïú ÏßÄÏßÄÎåÄÍ∞Ä Îê† Ïàò ÏûàÏäµÎãàÎã§',
                    importance: Math.min(user1.valueCategories.security, user2.valueCategories.security)
                });
            }
            
            // ÏÑ±Í≤© Ïú†ÏÇ¨ÏÑ±
            if (user1.personalityScores.agreeableness > 70 && user2.personalityScores.agreeableness > 70) {
                reasons.push({
                    title: 'ÏπúÌôîÏÑ±Í≥º Î∞∞Î†§Ïã¨',
                    description: 'Îëê Î∂Ñ Î™®Îëê Îã§Î•∏ ÏÇ¨ÎûåÏùÑ Î∞∞Î†§ÌïòÍ≥† Ïù¥Ìï¥ÌïòÎ†§Îäî ÎßàÏùåÏù¥ ÌÅ¨ÏãúÏñ¥, Ï°∞ÌôîÎ°úÏö¥ Í¥ÄÍ≥ÑÎ•º ÎßåÎì§Ïñ¥Í∞à Ïàò ÏûàÏäµÎãàÎã§',
                    importance: (user1.personalityScores.agreeableness + user2.personalityScores.agreeableness) / 2 * 0.9
                });
            }
            
            return reasons.sort((a, b) => b.importance - a.importance).slice(0, 5);
        }
        
        // 3. Îã§Ï§ë Îß§Ïπ≠ ÌÖåÏä§Ìä∏
        async function testMultipleMatches() {
            const steps = [
                { title: 'ÌÖåÏä§Ìä∏ Ï¥àÍ∏∞Ìôî', description: '10Ìöå Ïó∞ÏÜç Îß§Ïπ≠ ÌÖåÏä§Ìä∏ Ï§ÄÎπÑ' },
                { title: '1-3Ìöå ÌÖåÏä§Ìä∏', description: 'Ï¥àÍ∏∞ Îß§Ïπ≠ ÏÑ±Îä• ÌôïÏù∏' },
                { title: '4-6Ìöå ÌÖåÏä§Ìä∏', description: 'ÏùºÍ¥ÄÏÑ± Í≤ÄÏ¶ù' },
                { title: '7-10Ìöå ÌÖåÏä§Ìä∏', description: 'ÏµúÏ¢Ö ÏÑ±Îä• Ï∏°Ï†ï' },
                { title: 'Í≤∞Í≥º Î∂ÑÏÑù', description: 'ÌÜµÍ≥Ñ Î∞è ÏÑ±Îä• ÏßÄÌëú Í≥ÑÏÇ∞' }
            ];
            
            loadingManager.show(
                'Îã§Ï§ë Îß§Ïπ≠ ÏÑ±Îä• ÌÖåÏä§Ìä∏', 
                '10Ìöå Ïó∞ÏÜç Îß§Ïπ≠ÏúºÎ°ú ÏãúÏä§ÌÖú ÏïàÏ†ïÏÑ±ÏùÑ Í≤ÄÏ¶ùÌï©ÎãàÎã§', 
                steps, 
                '8-10Ï¥à'
            );
            
            await new Promise(resolve => setTimeout(resolve, 500));
            
            const results = [];
            const startTime = performance.now();
            
            loadingManager.nextStep('ÌÖåÏä§Ìä∏ ÌôòÍ≤Ω ÏÑ§Ï†ï Ï§ë...');
            
            for (let i = 0; i < 10; i++) {
                // Îã®Í≥ÑÎ≥Ñ ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
                if (i === 0) loadingManager.nextStep('1-3Ìöå ÌÖåÏä§Ìä∏ ÏßÑÌñâ Ï§ë...');
                else if (i === 3) loadingManager.nextStep('4-6Ìöå ÌÖåÏä§Ìä∏ ÏßÑÌñâ Ï§ë...');
                else if (i === 6) loadingManager.nextStep('7-10Ìöå ÌÖåÏä§Ìä∏ ÏßÑÌñâ Ï§ë...');
                
                const result = await simulateMatching({
                    userId: 'user1',
                    valueCategories: { family: 85, security: 75, health: 80, relationships: 90, spirituality: 65, growth: 70 },
                    personalityScores: { agreeableness: 78, conscientiousness: 85, extroversion: 65, openness: 71, emotionalStability: 80, optimism: 75, empathy: 82 },
                    interests: []
                }, {
                    userId: 'user2',
                    valueCategories: { family: 80, security: 85, health: 75, relationships: 85, spirituality: 70, growth: 68 },
                    personalityScores: { agreeableness: 82, conscientiousness: 79, extroversion: 72, openness: 68, emotionalStability: 83, optimism: 77, empathy: 85 },
                    interests: []
                });
                
                results.push(result.overallScore);
                log(`‚úÖ ÌÖåÏä§Ìä∏ ${i + 1}: ${result.overallScore}Ï†ê`);
                
                // ÏßßÏùÄ ÎåÄÍ∏∞ ÏãúÍ∞Ñ (UI ÏóÖÎç∞Ïù¥Ìä∏Ïö©)
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            loadingManager.nextStep('Í≤∞Í≥º Î∂ÑÏÑù Î∞è ÌÜµÍ≥Ñ Í≥ÑÏÇ∞ Ï§ë...');
            
            const endTime = performance.now();
            const totalTime = endTime - startTime;
            const avgTime = totalTime / 10;
            const avgScore = results.reduce((sum, score) => sum + score, 0) / results.length;
            const consistency = results.every(score => score === results[0]) ? '100%' : 'ÌòºÌï©';
            
            log(`‚úÖ Îã§Ï§ë Îß§Ïπ≠ ÌÖåÏä§Ìä∏ ÏôÑÎ£å!`);
            log(`üìä ÌèâÍ∑† Ï†êÏàò: ${avgScore.toFixed(1)}Ï†ê`);
            log(`‚ö° ÌèâÍ∑† Ï≤òÎ¶¨ ÏãúÍ∞Ñ: ${avgTime.toFixed(2)}ms`);
            log(`üîÑ ÏùºÍ¥ÄÏÑ±: ${consistency}`);
            
            const resultHTML = `
                <h4>‚úÖ 10Ìöå Ïó∞ÏÜç Îß§Ïπ≠ ÌÖåÏä§Ìä∏ ÏôÑÎ£å</h4>
                <div class="performance-stats">
                    <div class="performance-item">üìä ÌèâÍ∑† Ï†êÏàò: ${avgScore.toFixed(1)}Ï†ê</div>
                    <div class="performance-item">‚ö° ÌèâÍ∑† ÏãúÍ∞Ñ: ${avgTime.toFixed(2)}ms</div>
                    <div class="performance-item">üîÑ ÏùºÍ¥ÄÏÑ±: ${consistency}</div>
                </div>
                <p><strong>Î™®Îì† ÌÖåÏä§Ìä∏ Í≤∞Í≥º:</strong> ${results.join(', ')}Ï†ê</p>
                <p><strong>ÏÑ±Îä• Î™©Ìëú Îã¨ÏÑ±:</strong> ${avgTime < 1 ? '‚úÖ 0.5ms Î™©Ìëú Îã¨ÏÑ±!' : '‚ö†Ô∏è Î™©Ìëú ÏãúÍ∞Ñ Ï¥àÍ≥º'}</p>
            `;
            
            await new Promise(resolve => setTimeout(resolve, 300));
            
            loadingManager.complete(`Îã§Ï§ë ÌÖåÏä§Ìä∏ ÏôÑÎ£å! ÌèâÍ∑† ${avgScore.toFixed(1)}Ï†ê`);
            
            showResult('matchingResult', resultHTML, true);
            updateStatus(`‚úÖ Îã§Ï§ë ÌÖåÏä§Ìä∏ ÏôÑÎ£å! ÌèâÍ∑† ${avgScore.toFixed(1)}Ï†ê (${avgTime.toFixed(2)}ms)`);
        }
        
        // 4. Í∞ÄÏπòÍ¥Ä Î∂ÑÏÑù ÌÖåÏä§Ìä∏
        async function testValuesAnalysis() {
            log('üß≠ Í∞ÄÏπòÍ¥Ä Î∂ÑÏÑù ÏóîÏßÑ ÌÖåÏä§Ìä∏ ÏãúÏûë...');
            updateStatus('üß≠ 5Ï∞®Ïõê Í∞ÄÏπòÍ¥Ä Î∂ÑÏÑù Ïã§Ìñâ Ï§ë...');
            
            try {
                const testAnswers = new Map([
                    ['1', { value: 'family', weights: { family: 5, relationships: 4 } }],
                    ['2', { value: 'quality', weights: { relationships: 5, agreeableness: 4 } }],
                    ['3', { value: 'experience', weights: { growth: 3, openness: 3 } }],
                    ['4', { value: 'support', weights: { family: 4, empathy: 5 } }],
                    ['5', { value: 'mediate', weights: { agreeableness: 4, empathy: 3 } }]
                ]);
                
                const analysisResult = await simulateValuesAnalysis('test-user', testAnswers);
                
                log(`‚úÖ Í∞ÄÏπòÍ¥Ä Î∂ÑÏÑù ÏôÑÎ£å!`);
                log(`üéØ Ï£ºÏöî Í∞ÄÏπòÍ¥Ä: ${analysisResult.valueProfile.primaryValues[0].name}`);
                log(`üí¨ ÏÜåÌÜµ Ïä§ÌÉÄÏùº: ${analysisResult.valueProfile.personalityProfile.communicationStyle}`);
                
                const resultHTML = `
                    <h4>üß≠ 5Ï∞®Ïõê Í∞ÄÏπòÍ¥Ä Î∂ÑÏÑù ÏôÑÎ£å</h4>
                    <p><strong>ÌïµÏã¨ Î©îÏãúÏßÄ:</strong> ${analysisResult.analysisResult.coreMessage}</p>
                    
                    <h5>üìä Ï£ºÏöî Í∞ÄÏπòÍ¥Ä TOP 3</h5>
                    <div class="score-details">
                        ${analysisResult.valueProfile.primaryValues.map((value, index) => `
                            <div class="score-item">
                                <div class="score-value">${Math.round(value.score)}</div>
                                <div class="score-label">${index + 1}. ${value.name}</div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <h5>ü§ù ÏÑ±Í≤© ÌîÑÎ°úÌïÑ</h5>
                    <p><strong>ÏÜåÌÜµ Ïä§ÌÉÄÏùº:</strong> ${analysisResult.valueProfile.personalityProfile.communicationStyle}</p>
                    <p><strong>ÏùòÏÇ¨Í≤∞Ï†ï:</strong> ${analysisResult.valueProfile.personalityProfile.decisionMaking}</p>
                    <p><strong>Í∞àÎì± Ìï¥Í≤∞:</strong> ${analysisResult.valueProfile.personalityProfile.conflictResolution}</p>
                    
                    <p><strong>Î∂ÑÏÑù Ïã†Î¢∞ÎèÑ:</strong> ${analysisResult.confidence}%</p>
                `;
                
                showResult('valuesResult', resultHTML, true);
                updateStatus(`‚úÖ Í∞ÄÏπòÍ¥Ä Î∂ÑÏÑù ÏôÑÎ£å! Ïã†Î¢∞ÎèÑ ${analysisResult.confidence}%`);
                
            } catch (error) {
                log(`‚ùå Í∞ÄÏπòÍ¥Ä Î∂ÑÏÑù Ïã§Ìå®: ${error.message}`);
                showResult('valuesResult', `‚ùå Í∞ÄÏπòÍ¥Ä Î∂ÑÏÑù Ïã§Ìå®: ${error.message}`, false);
            }
        }
        
        // Í∞ÄÏπòÍ¥Ä Î∂ÑÏÑù ÏãúÎÆ¨Î†àÏù¥ÏÖò
        async function simulateValuesAnalysis(userId, answers) {
            const valueProfile = {
                primaryValues: [
                    { dimension: 'relationshipValues', name: 'Í¥ÄÍ≥ÑÍ¥Ä', score: 100, description: 'Ïù∏Í∞ÑÍ¥ÄÍ≥ÑÏóê ÎåÄÌïú Í∞ÄÏπòÏôÄ Ï†ëÍ∑ºÎ≤ï' },
                    { dimension: 'stabilityGrowth', name: 'ÏïàÏ†ï-ÏÑ±Ïû• Í∑†Ìòï', score: 85, description: 'ÏïàÏ†ïÍ≥º ÏÉàÎ°úÏö¥ ÎèÑÏ†Ñ ÏÇ¨Ïù¥Ïùò Í∑†ÌòïÏ†ê' },
                    { dimension: 'healthWellness', name: 'Í±¥Í∞ïÍ¥Ä', score: 80, description: 'Ïã†Ï≤¥Ï†Å, Ï†ïÏã†Ï†Å Í±¥Í∞ïÏóê ÎåÄÌïú Í∞ÄÏπòÍ¥Ä' }
                ],
                personalityProfile: {
                    communicationStyle: 'diplomatic',
                    decisionMaking: 'experienced',
                    conflictResolution: 'collaborative'
                }
            };
            
            const analysisResult = {
                coreMessage: 'ÏßÑÏ†ïÌïú Ïù∏Í∞ÑÍ¥ÄÍ≥ÑÏôÄ ÏÜåÌÜµÏùÑ Ï§ëÏãúÌïòÎäî Îî∞ÎúªÌïú Î∂ÑÏûÖÎãàÎã§. Î∞∞Î†§ ÍπäÍ≥† ÌòëÎ†•Ï†ÅÏù∏ ÏÑ±Ìñ•ÏùÑ ÌÜµÌï¥ ÎçîÏö± ÌíçÏÑ±Ìïú Ïù∏ÏÉùÏùÑ ÎßåÎì§Ïñ¥Í∞ÄÍ≥† Í≥ÑÏã≠ÎãàÎã§.'
            };
            
            return {
                userId,
                valueProfile,
                analysisResult,
                confidence: 94,
                timestamp: new Date()
            };
        }
        
        // 5. ÏãúÍ∞ÅÌôî Îç∞Ïù¥ÌÑ∞ ÌÖåÏä§Ìä∏
        async function testVisualization() {
            log('üé® ÏãúÍ∞ÅÌôî Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ± ÌÖåÏä§Ìä∏ ÏãúÏûë...');
            updateStatus('üé® Îß§Ïπ≠ ÏãúÍ∞ÅÌôî Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ± Ï§ë...');
            
            try {
                const visualData = await simulateVisualization();
                
                log(`‚úÖ ÏãúÍ∞ÅÌôî Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ± ÏôÑÎ£å!`);
                log(`üìà ÏãúÍ∞ÅÌôî ÏöîÏÜå: ${visualData.visualizations.length}Í∞ú`);
                
                const resultHTML = `
                    <h4>üé® ÏãúÍ∞ÅÌôî Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ± ÏôÑÎ£å</h4>
                    <p><strong>Ï†ÑÏ≤¥ Ìò∏ÌôòÏÑ±:</strong> ${visualData.overallCompatibility.score}Ï†ê</p>
                    <p><strong>Ìò∏ÌôòÏÑ± Î†àÎ≤®:</strong> ${visualData.overallCompatibility.level}</p>
                    <p><strong>ÏÉâÏÉÅ ÏΩîÎìú:</strong> <span style="color: ${visualData.overallCompatibility.color};">${visualData.overallCompatibility.color}</span></p>
                    
                    <h5>üìä ÏÉùÏÑ±Îêú ÏãúÍ∞ÅÌôî ÏöîÏÜå</h5>
                    <ul>
                        ${visualData.visualizations.map(viz => `
                            <li><strong>${viz.type}:</strong> ${viz.description} (Îç∞Ïù¥ÌÑ∞ ${viz.dataPoints}Í∞ú)</li>
                        `).join('')}
                    </ul>
                `;
                
                showResult('visualResult', resultHTML, true);
                updateStatus(`‚úÖ ÏãúÍ∞ÅÌôî Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ± ÏôÑÎ£å! ${visualData.visualizations.length}Í∞ú ÏöîÏÜå`);
                
            } catch (error) {
                log(`‚ùå ÏãúÍ∞ÅÌôî ÌÖåÏä§Ìä∏ Ïã§Ìå®: ${error.message}`);
                showResult('visualResult', `‚ùå ÏãúÍ∞ÅÌôî ÌÖåÏä§Ìä∏ Ïã§Ìå®: ${error.message}`, false);
            }
        }
        
        // ÏãúÍ∞ÅÌôî Îç∞Ïù¥ÌÑ∞ ÏãúÎÆ¨Î†àÏù¥ÏÖò
        async function simulateVisualization() {
            return {
                overallCompatibility: {
                    score: 104,
                    level: 'ÏµúÏÉÅÏùò Í∂ÅÌï© üíñ',
                    color: '#10b981',
                    description: 'Îß§Ïö∞ ÎÜíÏùÄ Ìò∏ÌôòÏÑ±ÏùÑ Î≥¥Ïù¥Î©∞, ÏÑúÎ°úÏóêÍ≤å Ïù¥ÏÉÅÏ†ÅÏù∏ ÌååÌä∏ÎÑàÍ∞Ä Îê† Í∞ÄÎä•ÏÑ±Ïù¥ ÌÅΩÎãàÎã§.'
                },
                visualizations: [
                    { type: 'Ï†ÑÏ≤¥ Ìò∏ÌôòÏÑ± Ï∞®Ìä∏', description: 'ÏõêÌòï Í≤åÏù¥ÏßÄ Ï∞®Ìä∏', dataPoints: 1 },
                    { type: '5Í∞ú ÏòÅÏó≠ Î∂ÑÏÑù', description: 'Î†àÏù¥Îçî Ï∞®Ìä∏', dataPoints: 5 },
                    { type: 'Í∞ÄÏπòÍ¥Ä ÎπÑÍµê', description: 'ÎßâÎåÄ Í∑∏ÎûòÌîÑ', dataPoints: 6 },
                    { type: 'ÏÑ±Í≤© Í∂ÅÌï©', description: 'ÏÇ∞Ï†êÎèÑ', dataPoints: 7 },
                    { type: 'Îß§Ïπ≠ Ïù¥Ïú†', description: 'Ïö∞ÏÑ†ÏàúÏúÑ Î¶¨Ïä§Ìä∏', dataPoints: 5 },
                    { type: 'ÏÑ±Ïû• Í∞ÄÎä•ÏÑ±', description: 'Ìä∏Î†åÎìú ÎùºÏù∏', dataPoints: 3 },
                    { type: 'ÏÜåÌÜµ Ïä§ÌÉÄÏùº', description: 'Î≤§ Îã§Ïù¥Ïñ¥Í∑∏Îû®', dataPoints: 4 },
                    { type: 'ÎùºÏù¥ÌîÑÏä§ÌÉÄÏùº', description: 'ÌûàÌä∏Îßµ', dataPoints: 8 }
                ]
            };
        }
        
        // 6. ÏÑ±Îä• Ï¢ÖÌï© ÌÖåÏä§Ìä∏
        async function runPerformanceTest() {
            log('üöÄ ÏÑ±Îä• Ï¢ÖÌï© ÌÖåÏä§Ìä∏ ÏãúÏûë...');
            updateStatus('üöÄ Phase 3 ÏãúÏä§ÌÖú Ï¢ÖÌï© ÏÑ±Îä• Ï∏°Ï†ï Ï§ë...');
            
            const testResults = {
                matchingTests: [],
                valuesTests: [],
                visualizationTests: []
            };
            
            // Îß§Ïπ≠ ÏÑ±Îä• ÌÖåÏä§Ìä∏ (100Ìöå)
            log('‚ö° Îß§Ïπ≠ ÏóîÏßÑ ÏÑ±Îä• ÌÖåÏä§Ìä∏ (100Ìöå)...');
            const matchingStartTime = performance.now();
            for (let i = 0; i < 100; i++) {
                const startTime = performance.now();
                await simulateMatching({
                    userId: 'user1',
                    valueCategories: { family: 85, security: 75, health: 80, relationships: 90 },
                    personalityScores: { agreeableness: 78, conscientiousness: 85 },
                    interests: []
                }, {
                    userId: 'user2',
                    valueCategories: { family: 80, security: 85, health: 75, relationships: 85 },
                    personalityScores: { agreeableness: 82, conscientiousness: 79 },
                    interests: []
                });
                testResults.matchingTests.push(performance.now() - startTime);
            }
            const matchingEndTime = performance.now();
            
            // ÌÜµÍ≥Ñ Í≥ÑÏÇ∞
            const avgMatchingTime = testResults.matchingTests.reduce((sum, time) => sum + time, 0) / testResults.matchingTests.length;
            const maxMatchingTime = Math.max(...testResults.matchingTests);
            const minMatchingTime = Math.min(...testResults.matchingTests);
            const totalMatchingTime = matchingEndTime - matchingStartTime;
            const tps = (100 / (totalMatchingTime / 1000)).toFixed(0);
            
            log(`‚úÖ ÏÑ±Îä• ÌÖåÏä§Ìä∏ ÏôÑÎ£å!`);
            log(`üìä ÌèâÍ∑† Ï≤òÎ¶¨ ÏãúÍ∞Ñ: ${avgMatchingTime.toFixed(2)}ms`);
            log(`‚ö° TPS: ${tps}Ìöå/Ï¥à`);
            
            const resultHTML = `
                <h4>üöÄ Phase 3 ÏãúÏä§ÌÖú ÏÑ±Îä• Ï∏°Ï†ï ÏôÑÎ£å</h4>
                <div class="performance-stats">
                    <div class="performance-item">üìä ÌèâÍ∑† ÏãúÍ∞Ñ: ${avgMatchingTime.toFixed(2)}ms</div>
                    <div class="performance-item">‚ö° TPS: ${tps}Ìöå/Ï¥à</div>
                    <div class="performance-item">üéØ Î™©Ìëú Îã¨ÏÑ±: ${avgMatchingTime < 1 ? '‚úÖ' : '‚ùå'}</div>
                </div>
                
                <h5>üìà ÏÉÅÏÑ∏ ÏÑ±Îä• ÏßÄÌëú</h5>
                <p><strong>ÏµúÏÜå ÏãúÍ∞Ñ:</strong> ${minMatchingTime.toFixed(2)}ms</p>
                <p><strong>ÏµúÎåÄ ÏãúÍ∞Ñ:</strong> ${maxMatchingTime.toFixed(2)}ms</p>
                <p><strong>Ï¥ù ÌÖåÏä§Ìä∏ ÏãúÍ∞Ñ:</strong> ${totalMatchingTime.toFixed(2)}ms</p>
                <p><strong>Î∂ÑÎãπ Ï≤òÎ¶¨Îüâ:</strong> ${(parseInt(tps) * 60).toLocaleString()}Îß§Ïπ≠/Î∂Ñ</p>
                
                <h5>üéØ ÏÑ±Îä• ÌèâÍ∞Ä</h5>
                <p><strong>Î™©Ìëú 0.5ms:</strong> ${avgMatchingTime < 0.5 ? '‚úÖ Îã¨ÏÑ±' : avgMatchingTime < 1 ? '‚ö° Ïö∞Ïàò' : '‚ö†Ô∏è Í∞úÏÑ† ÌïÑÏöî'}</p>
                <p><strong>ÏïàÏ†ïÏÑ±:</strong> ${(maxMatchingTime - minMatchingTime) < 1 ? '‚úÖ Îß§Ïö∞ ÏïàÏ†ï' : '‚ö†Ô∏è Î≥ÄÎèô ÏûàÏùå'}</p>
            `;
            
            showResult('performanceResult', resultHTML, true);
            updateStatus(`‚úÖ ÏÑ±Îä• ÌÖåÏä§Ìä∏ ÏôÑÎ£å! ÌèâÍ∑† ${avgMatchingTime.toFixed(2)}ms (${tps} TPS)`);
        }
        
        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        window.onload = function() {
            log('üéØ Phase 3 Îß§Ïπ≠ ÏãúÏä§ÌÖú ÌÖåÏä§Ìä∏ ÌéòÏù¥ÏßÄ Î°úÎìú ÏôÑÎ£å');
            log('üí° Í∞Å ÌÖåÏä§Ìä∏ Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ Phase 3 Îß§Ïπ≠ ÏãúÏä§ÌÖúÏùÑ Ï≤¥ÌóòÌï¥Î≥¥ÏÑ∏Ïöî!');
            updateStatus('üöÄ Phase 3 Îß§Ïπ≠ ÏãúÏä§ÌÖú Ï§ÄÎπÑ ÏôÑÎ£å! ÌÖåÏä§Ìä∏Î•º ÏãúÏûëÌï¥Î≥¥ÏÑ∏Ïöî.');
        };
    </script>
</body>
</html>