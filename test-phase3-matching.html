<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>ğŸ¯ Phase 3 ë§¤ì¹­ ì‹œìŠ¤í…œ ì‹¤ì œ í…ŒìŠ¤íŠ¸ v2.3 - ê¸€ììƒ‰ ê°œì„  (2025-07-10 19:15)</title>
    <style>
      body {
        font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
      }

      .container {
        background: white;
        border-radius: 20px;
        padding: 2rem;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }

      .header {
        text-align: center;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid #f0f0f0;
      }

      .title {
        font-size: 2.5rem;
        margin: 0;
        background: linear-gradient(135deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 700;
      }

      .subtitle {
        font-size: 1.2rem;
        color: #666;
        margin: 0.5rem 0;
      }

      .test-section {
        background: #f8f9fa;
        padding: 1.5rem;
        margin: 1.5rem 0;
        border-radius: 15px;
        border-left: 5px solid #667eea;
      }

      .test-section h3 {
        margin-top: 0;
        color: #333;
        font-size: 1.3rem;
      }

      button {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 10px;
        cursor: pointer;
        margin: 0.5rem;
        font-weight: 600;
        font-size: 1rem;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
      }

      button:disabled {
        background: #6c757d;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      .result {
        background: white;
        padding: 1.5rem;
        border-radius: 12px;
        margin-top: 1rem;
        border-left: 4px solid #667eea;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .success {
        border-left-color: #10b981;
        background: #f0fdf4;
      }

      .error {
        border-left-color: #ef4444;
        background: #fef2f2;
      }

      .score-display {
        font-size: 3rem;
        font-weight: 700;
        text-align: center;
        margin: 1rem 0;
        background: linear-gradient(135deg, #10b981, #059669);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .score-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin: 1rem 0;
      }

      .score-item {
        background: white;
        padding: 1rem;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      .score-value {
        font-size: 1.5rem;
        font-weight: 600;
        color: #667eea;
      }

      .score-label {
        font-size: 0.9rem;
        color: #666;
        margin-top: 0.5rem;
      }

      .matching-reasons {
        background: #f8f9fa;
        padding: 1rem;
        border-radius: 10px;
        margin: 1rem 0;
      }

      .reason-item {
        background: white;
        padding: 1rem;
        margin: 0.5rem 0;
        border-radius: 8px;
        border-left: 3px solid #667eea;
      }

      .reason-title {
        font-weight: 600;
        color: #333;
        margin-bottom: 0.5rem;
      }

      .reason-description {
        color: #666;
        font-size: 0.95rem;
      }

      .importance-badge {
        background: #667eea;
        color: white;
        padding: 0.2rem 0.5rem;
        border-radius: 5px;
        font-size: 0.8rem;
        font-weight: 600;
        float: right;
      }

      .log {
        background: #1f2937;
        color: #f9fafb;
        padding: 1rem;
        border-radius: 10px;
        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        font-size: 0.9rem;
        max-height: 400px;
        overflow-y: auto;
        margin-top: 1rem;
      }

      .performance-stats {
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
        padding: 1rem;
        border-radius: 10px;
        margin: 1rem 0;
      }

      .performance-item {
        display: inline-block;
        margin: 0 1rem;
      }

      .status {
        font-weight: 600;
        margin-bottom: 1rem;
        padding: 1rem;
        background: #e3f2fd;
        border-radius: 10px;
        text-align: center;
      }

      /* ========== ë¡œë”© ìƒíƒœ ê°œì„  ìŠ¤íƒ€ì¼ ========== */
      .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 9998;
        display: none;
      }

      .loading-container {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90%;
        max-width: 600px;
        padding: 2rem;
        background: #ffffff !important;
        border-radius: 15px;
        border: 3px solid #667eea;
        display: none;
        z-index: 9999;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
      }

      .loading-header {
        text-align: center;
        margin-bottom: 1.5rem;
      }

      .loading-title {
        font-size: 1.5rem;
        color: #1f2937;
        margin-bottom: 0.5rem;
        font-weight: 700;
      }

      .loading-subtitle {
        color: #374151;
        font-size: 1rem;
        font-weight: 500;
      }

      /* ========== 5ë‹¨ê³„ ì§„í–‰ ì‹œê°í™” ========== */
      .stage-progress-container {
        margin: 2rem 0;
        padding: 1.5rem;
        background: linear-gradient(135deg, #ffffff, #f8f9fa);
        border-radius: 15px;
        border: 3px solid #667eea;
        box-shadow: 0 8px 20px rgba(102, 126, 234, 0.15);
      }

      .current-stage {
        text-align: center;
        margin-bottom: 1.5rem;
        padding: 1rem;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        animation: stagePulse 2s infinite;
        border: 2px solid #fff;
      }

      @keyframes stagePulse {
        0% {
          transform: scale(1);
          box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        50% {
          transform: scale(1.02);
          box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        100% {
          transform: scale(1);
          box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
      }

      .stage-number {
        font-size: 1.5rem;
        font-weight: 700;
        margin-right: 0.5rem;
      }

      .stage-icon {
        font-size: 1.8rem;
        margin: 0 0.5rem;
        animation: iconBounce 1.5s infinite;
      }

      @keyframes iconBounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      .stage-text {
        font-size: 1.1rem;
        font-weight: 600;
      }

      .stages-indicator {
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 1rem 0;
      }

      .stage-dot {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 0.5rem;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        background: #ffffff;
        border: 3px solid #dee2e6;
        transition: all 0.3s ease;
        position: relative;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .stage-dot.active {
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-color: #667eea;
        transform: scale(1.1);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }

      .stage-dot.completed {
        background: linear-gradient(135deg, #10b981, #059669);
        border-color: #10b981;
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
      }

      .stage-emoji {
        font-size: 1.2rem;
        margin-bottom: 0.2rem;
      }

      .stage-label {
        font-size: 0.7rem;
        font-weight: 600;
        color: #333;
        text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
      }

      .stage-dot.active .stage-label,
      .stage-dot.completed .stage-label {
        color: white;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
      }

      .stage-connector {
        width: 40px;
        height: 4px;
        background: #dee2e6;
        border-radius: 2px;
        transition: all 0.5s ease;
      }

      .stage-connector.completed {
        background: linear-gradient(90deg, #10b981, #059669);
        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
      }

      .progress-container {
        width: 100%;
        height: 12px;
        background-color: #e9ecef;
        border-radius: 6px;
        overflow: hidden;
        margin: 1.5rem 0;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        position: relative;
      }

      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
        background-size: 200% 100%;
        border-radius: 6px;
        transition: width 0.5s ease;
        animation: shimmer 2s infinite linear;
      }

      .progress-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 0.9rem;
        font-weight: 700;
        color: #1a202c;
        text-shadow: 1px 1px 3px rgba(255, 255, 255, 0.9);
        z-index: 10;
      }

      @keyframes shimmer {
        0% {
          background-position: -200% 0;
        }
        100% {
          background-position: 200% 0;
        }
      }

      .loading-steps {
        margin: 1.5rem 0;
      }

      .loading-step {
        display: flex;
        align-items: center;
        margin: 0.8rem 0;
        padding: 0.5rem;
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .loading-step.active {
        background: rgba(102, 126, 234, 0.15);
        border-left: 4px solid #667eea;
        box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        animation: pulse 2s infinite;
      }

      .loading-step.completed {
        background: rgba(16, 185, 129, 0.1);
        border-left: 4px solid #10b981;
        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.2);
        animation: completedGlow 0.5s ease-out;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.02);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes completedGlow {
        0% {
          box-shadow: 0 2px 8px rgba(16, 185, 129, 0.2);
        }
        50% {
          box-shadow: 0 4px 16px rgba(16, 185, 129, 0.4);
        }
        100% {
          box-shadow: 0 2px 8px rgba(16, 185, 129, 0.2);
        }
      }

      .step-icon {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1rem;
        font-weight: bold;
        font-size: 0.8rem;
      }

      .step-icon.pending {
        background: #e9ecef;
        color: #6c757d;
      }

      .step-icon.active {
        background: #667eea;
        color: white;
        animation: iconPulse 1.5s infinite;
        box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
      }

      .step-icon.completed {
        background: #10b981;
        color: white;
        animation: iconSuccess 0.6s ease-out;
        box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
      }

      @keyframes iconPulse {
        0% {
          transform: scale(1);
          box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }
        50% {
          transform: scale(1.1);
          box-shadow: 0 0 20px rgba(102, 126, 234, 0.7);
        }
        100% {
          transform: scale(1);
          box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }
      }

      @keyframes iconSuccess {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.3);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      .step-text {
        flex: 1;
      }

      .step-title {
        font-weight: 700 !important;
        color: #111827 !important;
      }

      .step-description {
        font-size: 0.9rem !important;
        color: #1f2937 !important;
        font-weight: 600 !important;
      }

      .step-time {
        font-size: 0.8rem !important;
        color: #374151 !important;
        margin-left: auto;
        font-weight: 600 !important;
      }

      .processing-animation {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 1rem 0;
      }

      .dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #667eea;
        margin: 0 4px;
        animation: bounce 1.4s infinite ease-in-out both;
      }

      .dot:nth-child(1) {
        animation-delay: -0.32s;
      }
      .dot:nth-child(2) {
        animation-delay: -0.16s;
      }
      .dot:nth-child(3) {
        animation-delay: 0s;
      }

      @keyframes bounce {
        0%,
        80%,
        100% {
          transform: scale(0);
        }
        40% {
          transform: scale(1);
        }
      }

      .estimated-time {
        text-align: center;
        color: #666;
        font-size: 0.9rem;
        margin-top: 1rem;
        font-style: italic;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-in {
        animation: fadeIn 0.5s ease-out;
      }

      /* ========== ê°œì¸í™” ì‹œìŠ¤í…œ ìŠ¤íƒ€ì¼ ========== */
      .personalization-results {
        margin-top: 1rem;
      }

      .score-comparison {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 1.5rem;
        border-radius: 12px;
        margin: 1rem 0;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
      }

      .score-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 0.8rem 0;
        padding: 0.5rem;
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .score-item:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: translateX(5px);
      }

      .score-item.highlight {
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid rgba(255, 255, 255, 0.3);
        font-weight: 600;
        transform: scale(1.02);
      }

      .score-item.final {
        background: rgba(255, 255, 255, 0.3);
        border: 2px solid rgba(255, 255, 255, 0.5);
        font-weight: 700;
        font-size: 1.1rem;
        transform: scale(1.05);
      }

      .score-label {
        font-size: 0.95rem;
      }

      .score-value {
        font-size: 1.2rem;
        font-weight: 700;
        color: #ffd700;
      }

      .personalization-info {
        background: #f8f9fa;
        padding: 1rem;
        border-radius: 8px;
        margin: 1rem 0;
        border-left: 4px solid #667eea;
      }

      .personalization-info p {
        margin: 0.5rem 0;
        font-size: 0.95rem;
      }

      .preference-patterns {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin: 1rem 0;
      }

      /* ğŸ¯ 4060ì„¸ëŒ€ ëª¨ë°”ì¼ ìµœì í™” - í„°ì¹˜ ì¸í„°í˜ì´ìŠ¤ ìš°ì„  */
      @media (max-width: 768px) {
        /* ê¸°ë³¸ ë ˆì´ì•„ì›ƒ */
        body {
          padding: 1rem;
          font-size: 18px; /* 4060ì„¸ëŒ€ ê°€ë…ì„± í–¥ìƒ */
        }

        .container {
          padding: 1.5rem;
          border-radius: 15px;
        }

        /* ì œëª© ë° í…ìŠ¤íŠ¸ ìµœì í™” */
        .title {
          font-size: 2rem;
          line-height: 1.3;
        }

        .subtitle {
          font-size: 1.1rem;
          line-height: 1.4;
        }

        /* ë²„íŠ¼ í„°ì¹˜ ìµœì í™” - 44px+ */
        button {
          padding: 0.9rem 1.2rem;
          font-size: 1.1rem;
          min-height: 44px;
          min-width: 44px;
          margin: 0.75rem 0.5rem;
          border-radius: 8px;
        }

        /* í…ŒìŠ¤íŠ¸ ì„¹ì…˜ ìµœì í™” */
        .test-section {
          padding: 1.2rem;
          margin: 1rem 0;
          border-radius: 12px;
        }

        .test-section h3 {
          font-size: 1.2rem;
          margin-bottom: 0.8rem;
        }

        .test-section p {
          font-size: 1rem;
          line-height: 1.5;
        }

        /* ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ */
        .preference-patterns {
          grid-template-columns: 1fr;
          gap: 0.8rem;
        }

        /* ë¡œë”© UI ëª¨ë°”ì¼ ìµœì í™” */
        .loading-container {
          padding: 1rem;
          max-width: 95%;
        }

        .loading-title {
          font-size: 1.3rem;
        }

        .loading-subtitle {
          font-size: 1rem;
        }

        .current-stage {
          padding: 0.8rem;
          border-radius: 8px;
        }

        .stage-number {
          font-size: 1.2rem;
          min-width: 32px;
          min-height: 32px;
        }

        .stage-text {
          font-size: 0.95rem;
        }

        /* 5ë‹¨ê³„ ì§„í–‰ í‘œì‹œ ìµœì í™” */
        .stages-indicator {
          flex-direction: column;
          gap: 0.5rem;
          padding: 1rem 0;
        }

        .stage-dot {
          width: 100%;
          height: 44px;
          border-radius: 8px;
          flex-direction: row;
          justify-content: flex-start;
          padding: 0 1rem;
          gap: 0.8rem;
        }

        .stage-connector {
          display: none; /* ì„¸ë¡œ ë ˆì´ì•„ì›ƒì—ì„œëŠ” ì—°ê²°ì„  ì œê±° */
        }

        .stage-emoji {
          font-size: 1.2rem;
        }

        .stage-label {
          font-size: 1rem;
          font-weight: 600;
        }

        /* ê²°ê³¼ í‘œì‹œ ìµœì í™” */
        .result {
          padding: 1.2rem;
          border-radius: 10px;
          margin-top: 0.8rem;
          font-size: 1rem;
          line-height: 1.5;
        }

        /* ì ìˆ˜ í‘œì‹œ ìµœì í™” */
        .score-item {
          padding: 0.8rem;
          border-radius: 8px;
          margin: 0.5rem 0;
          min-height: 44px;
        }

        .score-label {
          font-size: 1rem;
        }

        .score-value {
          font-size: 1.3rem;
        }

        /* íŒ¨í„´ ì„¹ì…˜ ìµœì í™” */
        .pattern-section {
          padding: 1rem;
          border-radius: 10px;
          margin: 0.5rem 0;
        }

        .pattern-item {
          padding: 0.8rem;
          margin: 0.5rem 0;
          border-radius: 8px;
          font-size: 0.95rem;
          min-height: 40px;
        }

        /* ì¶”ì²œ ì‚¬í•­ ìµœì í™” */
        .recommendations {
          padding: 1.2rem;
          border-radius: 10px;
          margin: 1rem 0;
        }

        .recommendation-item {
          padding: 0.8rem;
          margin: 0.5rem 0;
          border-radius: 6px;
          font-size: 1rem;
          line-height: 1.4;
          min-height: 40px;
        }

        /* ê°œì¸í™” ì •ë³´ ìµœì í™” */
        .personalization-info {
          padding: 1.2rem;
          border-radius: 10px;
          margin: 1rem 0;
        }

        .personalization-info p {
          font-size: 1rem;
          line-height: 1.5;
          margin: 0.8rem 0;
        }

        /* ìƒíƒœ í‘œì‹œ ìµœì í™” */
        .status {
          padding: 1rem;
          font-size: 1.1rem;
          border-radius: 10px;
          margin: 1rem 0;
        }

        /* í•˜ì´ë¼ì´íŠ¸ ì„¹ì…˜ ìµœì í™” */
        .improvement-highlight {
          padding: 1.5rem;
          border-radius: 12px;
          margin: 1rem 0;
          text-align: center;
        }

        .improvement-highlight h6 {
          font-size: 1.3rem;
          margin-bottom: 1rem;
        }

        .improvement-highlight p {
          font-size: 1rem;
          line-height: 1.5;
          margin: 0.8rem 0;
        }
      }

      .pattern-section {
        background: #f0f8ff;
        padding: 1rem;
        border-radius: 8px;
        border: 1px solid #e0e7ff;
      }

      .pattern-section h6 {
        margin: 0 0 0.5rem 0;
        color: #667eea;
        font-size: 0.9rem;
        font-weight: 600;
      }

      .pattern-item {
        background: white;
        padding: 0.5rem;
        margin: 0.3rem 0;
        border-radius: 6px;
        border-left: 3px solid #667eea;
        font-size: 0.85rem;
        transition: all 0.3s ease;
      }

      .pattern-item:hover {
        transform: translateX(3px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .recommendations {
        background: #f0fdf4;
        padding: 1rem;
        border-radius: 8px;
        border: 1px solid #bbf7d0;
        margin: 1rem 0;
      }

      .recommendation-item {
        color: #166534;
        margin: 0.5rem 0;
        font-size: 0.9rem;
        padding: 0.3rem;
        border-radius: 4px;
        transition: all 0.3s ease;
      }

      .recommendation-item:hover {
        background: #dcfce7;
        transform: translateX(3px);
      }

      .improvement-highlight {
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
        padding: 1.5rem;
        border-radius: 12px;
        margin: 1rem 0;
        text-align: center;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
      }

      .improvement-highlight h6 {
        margin: 0 0 1rem 0;
        font-size: 1.2rem;
        color: #ffd700;
      }

      .improvement-highlight p {
        margin: 0.5rem 0;
        font-size: 0.95rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1 class="title">ğŸ¯ Phase 3 ë§¤ì¹­ ì‹œìŠ¤í…œ v3.0 - ê¸€ììƒ‰ ê°œì„  í…ŒìŠ¤íŠ¸</h1>
        <p class="subtitle">í¬íŠ¸ ìˆ˜ì • + 5ë‹¨ê³„ ì‹œê°í™” - CHARM_INYEON</p>
        <div
          style="
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 0.75rem;
            border-radius: 8px;
            margin: 1rem 0;
            color: #856404;
          "
        >
          âš¡ <strong>ìºì‹œ ìƒˆë¡œê³ ì¹¨:</strong> Ctrl+F5 (Windows) ë˜ëŠ” Cmd+Shift+R (Mac)ìœ¼ë¡œ ê°•ì œ
          ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”!
        </div>
      </div>

      <div class="status" id="status">
        ğŸš€ Phase 3 ë§¤ì¹­ ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ! ì‹¤ì œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”.
      </div>

      <!-- ========== ë¡œë”© ìƒíƒœ ê°œì„  ì»¨í…Œì´ë„ˆ ========== -->
      <div class="loading-overlay" id="loadingOverlay"></div>
      <div class="loading-container" id="loadingContainer">
        <div class="loading-header">
          <div class="loading-title" id="loadingTitle">ë§¤ì¹­ ë¶„ì„ ì§„í–‰ ì¤‘</div>
          <div class="loading-subtitle" id="loadingSubtitle">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</div>
        </div>

        <!-- 5ë‹¨ê³„ ì§„í–‰ ë°” -->
        <div class="stage-progress-container">
          <div class="current-stage" id="currentStage">
            <span class="stage-number" id="stageNumber">1</span>
            <span class="stage-icon" id="stageIcon">ğŸ”„</span>
            <span class="stage-text" id="stageText">ê°œì¸í™” ì—”ì§„ ì´ˆê¸°í™” ì¤‘...</span>
          </div>

          <div class="stages-indicator">
            <div class="stage-dot active" id="stage-dot-0" data-stage="0">
              <span class="stage-emoji">ğŸ”„</span>
              <span class="stage-label">ì´ˆê¸°í™”</span>
            </div>
            <div class="stage-connector" id="connector-0"></div>

            <div class="stage-dot" id="stage-dot-1" data-stage="1">
              <span class="stage-emoji">ğŸ“š</span>
              <span class="stage-label">íˆìŠ¤í† ë¦¬</span>
            </div>
            <div class="stage-connector" id="connector-1"></div>

            <div class="stage-dot" id="stage-dot-2" data-stage="2">
              <span class="stage-emoji">ğŸ§ </span>
              <span class="stage-label">í•™ìŠµ</span>
            </div>
            <div class="stage-connector" id="connector-2"></div>

            <div class="stage-dot" id="stage-dot-3" data-stage="3">
              <span class="stage-emoji">ğŸ’–</span>
              <span class="stage-label">ë§¤ì¹­</span>
            </div>
            <div class="stage-connector" id="connector-3"></div>

            <div class="stage-dot" id="stage-dot-4" data-stage="4">
              <span class="stage-emoji">âœ¨</span>
              <span class="stage-label">ì¸ì‚¬ì´íŠ¸</span>
            </div>
          </div>
        </div>

        <div class="progress-container">
          <div class="progress-bar" id="progressBar" style="width: 0%"></div>
          <div class="progress-text" id="progressText">0%</div>
        </div>

        <div class="loading-steps" id="loadingSteps">
          <!-- ë‹¨ê³„ë³„ ì§„í–‰ ìƒí™©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </div>

        <div class="processing-animation">
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>

        <div class="estimated-time" id="estimatedTime">ì˜ˆìƒ ì™„ë£Œ ì‹œê°„: ì•½ 2-3ì´ˆ</div>
      </div>

      <div class="test-section">
        <h3>ğŸ” 1. ì„œë²„ ì—°ê²° ìƒíƒœ í™•ì¸</h3>
        <p style="color: #dc2626 !important; font-weight: 600 !important">
          âœ… ê¸€ììƒ‰ í…ŒìŠ¤íŠ¸ ì„±ê³µ! ì •ì  íŒŒì¼ ì„œë²„ (localhost:3001) ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
        </p>
        <button onclick="testServerConnection()">ì„œë²„ ì—°ê²° í…ŒìŠ¤íŠ¸</button>
        <div id="serverResult" class="result" style="display: none"></div>
      </div>

      <div class="test-section">
        <h3>âš¡ 2. Phase 3 ë§¤ì¹­ ì—”ì§„ í…ŒìŠ¤íŠ¸</h3>
        <p>ì‹¤ì œ Phase 3 ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤. (104ì  ë§¤ì¹­ ì‹œë‚˜ë¦¬ì˜¤)</p>
        <button onclick="testPhase3Matching()">104ì  ë§¤ì¹­ í…ŒìŠ¤íŠ¸</button>
        <button onclick="testMultipleMatches()">ë‹¤ì¤‘ ë§¤ì¹­ í…ŒìŠ¤íŠ¸ (10íšŒ)</button>
        <div id="matchingResult" class="result" style="display: none"></div>
      </div>

      <div class="test-section">
        <h3>ğŸ“Š 3. ê°€ì¹˜ê´€ ë¶„ì„ ì—”ì§„ í…ŒìŠ¤íŠ¸</h3>
        <p>4060ì„¸ëŒ€ íŠ¹í™” ê°€ì¹˜ê´€ 5ì°¨ì› ë¶„ì„ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
        <button onclick="testValuesAnalysis()">5ì°¨ì› ê°€ì¹˜ê´€ ë¶„ì„</button>
        <div id="valuesResult" class="result" style="display: none"></div>
      </div>

      <div class="test-section">
        <h3>ğŸ¨ 4. ì‹œê°í™” ë°ì´í„° ìƒì„± í…ŒìŠ¤íŠ¸</h3>
        <p>ë§¤ì¹­ ê²°ê³¼ ì‹œê°í™” ë°ì´í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
        <button onclick="testVisualization()">ì‹œê°í™” ë°ì´í„° ìƒì„±</button>
        <div id="visualResult" class="result" style="display: none"></div>
      </div>

      <div class="test-section">
        <h3>ğŸš€ 5. ì„±ëŠ¥ ì¢…í•© í…ŒìŠ¤íŠ¸</h3>
        <p>Phase 3 ì‹œìŠ¤í…œì˜ ì „ì²´ì ì¸ ì„±ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
        <button onclick="runPerformanceTest()">ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (0.5ms ëª©í‘œ)</button>
        <div id="performanceResult" class="result" style="display: none"></div>
      </div>

      <div
        class="test-section"
        style="
          background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
          color: white;
          border: 2px solid #ff6b6b;
        "
      >
        <h3>ğŸ¯ 6. ê°œì¸í™” ë§¤ì¹­ ì‹œìŠ¤í…œ (ì™„ì „ì²´++ 2ë‹¨ê³„)</h3>
        <p style="color: #fff">
          4060ì„¸ëŒ€ íŠ¹í™” ê°œì¸ ë§ì¶¤í˜• ë§¤ì¹­ ë¶„ì„ ì‹œìŠ¤í…œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤. ê³¼ê±° ë§¤ì¹­ íŒ¨í„´ í•™ìŠµê³¼ ì ì‘í˜•
          ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë”ìš± ì •í™•í•œ ë§¤ì¹­ì„ ì œê³µí•©ë‹ˆë‹¤.
        </p>
        <button
          onclick="testPersonalizedMatching()"
          style="background: #fff; color: #ff6b6b; border: 2px solid #fff; font-weight: bold"
        >
          ğŸ¯ ê°œì¸í™” ë§¤ì¹­ í…ŒìŠ¤íŠ¸
        </button>
        <div id="personalizedResult" class="result" style="display: none"></div>
      </div>

      <div class="log" id="log">ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>
    </div>

    <script>
      let testCount = 0;

      function log(message) {
        const logElement = document.getElementById('log');
        const timestamp = new Date().toLocaleTimeString();
        logElement.innerHTML += `[${timestamp}] ${message}\n`;
        logElement.scrollTop = logElement.scrollHeight;
      }

      function updateStatus(message) {
        document.getElementById('status').innerHTML = message;
      }

      function showResult(elementId, content, isSuccess = true) {
        const element = document.getElementById(elementId);
        element.innerHTML = content;
        element.className = `result ${isSuccess ? 'success' : 'error'} fade-in`;
        element.style.display = 'block';
      }

      // ========== ë¡œë”© ìƒíƒœ ê°œì„  ì‹œìŠ¤í…œ ==========

      class LoadingManager {
        constructor() {
          this.overlay = document.getElementById('loadingOverlay');
          this.container = document.getElementById('loadingContainer');
          this.title = document.getElementById('loadingTitle');
          this.subtitle = document.getElementById('loadingSubtitle');
          this.progressBar = document.getElementById('progressBar');
          this.progressText = document.getElementById('progressText');
          this.stepsContainer = document.getElementById('loadingSteps');
          this.estimatedTime = document.getElementById('estimatedTime');
          this.stageNumber = document.getElementById('stageNumber');
          this.stageIcon = document.getElementById('stageIcon');
          this.stageText = document.getElementById('stageText');
          this.currentStep = 0;
          this.totalSteps = 0;
          this.startTime = null;
          this.stageInfo = [
            { icon: 'ğŸ”„', text: 'ê°œì¸í™” ì—”ì§„ ì´ˆê¸°í™” ì¤‘...', color: '#667eea' },
            { icon: 'ğŸ“š', text: 'íˆìŠ¤í† ë¦¬ ë°ì´í„° ìƒì„± ì¤‘...', color: '#f59e0b' },
            { icon: 'ğŸ§ ', text: 'ì ì‘í˜• í•™ìŠµ ì§„í–‰ ì¤‘...', color: '#8b5cf6' },
            { icon: 'ğŸ’–', text: 'ê°œì¸í™” ë§¤ì¹­ ë¶„ì„ ì¤‘...', color: '#ef4444' },
            { icon: 'âœ¨', text: 'ì¸ì‚¬ì´íŠ¸ ìƒì„± ì¤‘...', color: '#10b981' },
          ];
        }

        show(title, subtitle, steps, estimatedTime = '2-3ì´ˆ') {
          this.title.textContent = title;
          this.subtitle.textContent = subtitle;
          this.estimatedTime.textContent = `ì˜ˆìƒ ì™„ë£Œ ì‹œê°„: ì•½ ${estimatedTime}`;
          this.setupSteps(steps);

          // ì˜¤ë²„ë ˆì´ì™€ ì»¨í…Œì´ë„ˆ í•¨ê»˜ í‘œì‹œ
          if (this.overlay) this.overlay.style.display = 'block';
          this.container.style.display = 'block';
          this.container.classList.add('fade-in');
          this.startTime = Date.now();

          // ì²« ë²ˆì§¸ ë‹¨ê³„ ì‹œê°í™” ì´ˆê¸°í™”
          this.updateStageVisual(0);

          log(`ğŸ”„ ${title} ì‹œì‘`);
        }

        hide() {
          if (this.overlay) this.overlay.style.display = 'none';
          this.container.style.display = 'none';
          this.reset();
        }

        setupSteps(steps) {
          this.totalSteps = steps.length;
          this.currentStep = 0;
          this.stepsContainer.innerHTML = '';

          steps.forEach((step, index) => {
            const stepElement = document.createElement('div');
            stepElement.className = 'loading-step';
            stepElement.id = `step-${index}`;

            stepElement.innerHTML = `
                        <div class="step-icon pending" id="icon-${index}">${index + 1}</div>
                        <div class="step-text">
                            <div class="step-title" style="color: #000000 !important; font-weight: 800 !important; font-size: 1rem !important;">${
                              step.title
                            }</div>
                            <div class="step-description" style="color: #dc2626 !important; font-weight: 700 !important; font-size: 0.95rem !important;">${
                              step.description
                            }</div>
                            <div class="step-detail" id="detail-${index}" style="display: none; color: #7c3aed !important; font-size: 0.9rem; margin-top: 0.3rem; font-style: italic; font-weight: 600 !important;">${
              step.detail || ''
            }</div>
                        </div>
                        <div class="step-time" id="time-${index}" style="color: #059669 !important; font-weight: 700 !important; font-size: 0.85rem !important;">ëŒ€ê¸° ì¤‘</div>
                    `;

            this.stepsContainer.appendChild(stepElement);
          });
        }

        nextStep(customMessage = null) {
          if (this.currentStep > 0) {
            // ì´ì „ ë‹¨ê³„ ì™„ë£Œ ì²˜ë¦¬
            const prevStep = document.getElementById(`step-${this.currentStep - 1}`);
            const prevIcon = document.getElementById(`icon-${this.currentStep - 1}`);
            const prevTime = document.getElementById(`time-${this.currentStep - 1}`);
            const prevDetail = document.getElementById(`detail-${this.currentStep - 1}`);

            prevStep.className = 'loading-step completed';
            prevIcon.className = 'step-icon completed';
            prevIcon.innerHTML = 'âœ“';
            prevTime.textContent = 'ì™„ë£Œ';
            if (prevDetail) prevDetail.style.display = 'none';

            // íƒ€ì´ë¨¸ ì •ë¦¬
            this.stopStepTimer();
          }

          if (this.currentStep < this.totalSteps) {
            // í˜„ì¬ ë‹¨ê³„ í™œì„±í™”
            const currentStep = document.getElementById(`step-${this.currentStep}`);
            const currentIcon = document.getElementById(`icon-${this.currentStep}`);
            const currentTime = document.getElementById(`time-${this.currentStep}`);
            const currentDetail = document.getElementById(`detail-${this.currentStep}`);

            currentStep.className = 'loading-step active';
            currentIcon.className = 'step-icon active';
            currentTime.textContent = 'ì§„í–‰ ì¤‘...';

            // ìƒì„¸ ì„¤ëª… í‘œì‹œ
            if (currentDetail) {
              currentDetail.style.display = 'block';
              currentDetail.style.animation = 'fadeIn 0.5s ease-out';
            }

            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (20%, 40%, 60%, 80%, 100%)
            const progress = ((this.currentStep + 1) / this.totalSteps) * 100;
            this.updateProgress(progress);

            // 5ë‹¨ê³„ ì‹œê°í™” ì—…ë°ì´íŠ¸
            this.updateStageVisual(this.currentStep);

            // ê° ë‹¨ê³„ë³„ íƒ€ì´ë¨¸ ì‹œì‘
            this.startStepTimer(this.currentStep);

            // ì‚¬ìš©ì ì •ì˜ ë©”ì‹œì§€ê°€ ìˆìœ¼ë©´ ë¡œê·¸ì— ì¶œë ¥
            if (customMessage) {
              log(`ğŸ“‹ ${customMessage}`);
            }

            this.currentStep++;
          }
        }

        complete(message = 'ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!') {
          // ë§ˆì§€ë§‰ ë‹¨ê³„ ì™„ë£Œ
          if (this.currentStep > 0) {
            const lastStep = document.getElementById(`step-${this.currentStep - 1}`);
            const lastIcon = document.getElementById(`icon-${this.currentStep - 1}`);
            const lastTime = document.getElementById(`time-${this.currentStep - 1}`);

            lastStep.className = 'loading-step completed';
            lastIcon.className = 'step-icon completed';
            lastIcon.textContent = 'âœ“';
            lastTime.textContent = 'ì™„ë£Œ';
          }

          this.updateProgress(100);
          this.subtitle.textContent = message;

          // ëª¨ë“  ë‹¨ê³„ë¥¼ ì™„ë£Œ ìƒíƒœë¡œ í‘œì‹œ
          for (let i = 0; i < 5; i++) {
            const dot = document.getElementById(`stage-dot-${i}`);
            const connector = document.getElementById(`connector-${i}`);
            dot.className = 'stage-dot completed';
            if (connector) connector.className = 'stage-connector completed';
          }

          // ìµœì¢… ë‹¨ê³„ í‘œì‹œ
          this.stageNumber.textContent = 'ì™„ë£Œ';
          this.stageIcon.textContent = 'ğŸŠ';
          this.stageText.textContent = 'ê°œì¸í™” ë§¤ì¹­ ë¶„ì„ ì™„ë£Œ!';
          const currentStage = document.getElementById('currentStage');
          currentStage.style.background = 'linear-gradient(135deg, #10b981, #059669)';

          const totalTime = Date.now() - this.startTime;
          log(`âœ… ì™„ë£Œ! ì´ ì²˜ë¦¬ ì‹œê°„: ${totalTime}ms`);

          // 1ì´ˆ í›„ ë¡œë”©ì°½ ìˆ¨ê¹€
          setTimeout(() => this.hide(), 1000);
        }

        updateProgress(percentage) {
          this.progressBar.style.width = `${percentage}%`;
          if (this.progressText) {
            this.progressText.textContent = `${Math.round(percentage)}%`;
          }
        }

        updateStageVisual(stepIndex) {
          // í˜„ì¬ ë‹¨ê³„ í‘œì‹œ ì—…ë°ì´íŠ¸
          if (stepIndex < this.stageInfo.length) {
            const stage = this.stageInfo[stepIndex];
            this.stageNumber.textContent = stepIndex + 1;
            this.stageIcon.textContent = stage.icon;
            this.stageText.textContent = stage.text;

            // í˜„ì¬ ë‹¨ê³„ ìƒ‰ìƒ ë³€ê²½
            const currentStage = document.getElementById('currentStage');
            currentStage.style.background = `linear-gradient(135deg, ${
              stage.color
            }, ${this.adjustColor(stage.color, -20)})`;
          }

          // ë‹¨ê³„ ë„íŠ¸ ì—…ë°ì´íŠ¸
          for (let i = 0; i < 5; i++) {
            const dot = document.getElementById(`stage-dot-${i}`);
            const connector = document.getElementById(`connector-${i}`);

            if (i < stepIndex) {
              // ì™„ë£Œëœ ë‹¨ê³„
              dot.className = 'stage-dot completed';
              if (connector) connector.className = 'stage-connector completed';
            } else if (i === stepIndex) {
              // í˜„ì¬ ë‹¨ê³„
              dot.className = 'stage-dot active';
            } else {
              // ëŒ€ê¸° ì¤‘ì¸ ë‹¨ê³„
              dot.className = 'stage-dot';
              if (connector) connector.className = 'stage-connector';
            }
          }
        }

        adjustColor(color, amount) {
          const usePound = color[0] === '#';
          const col = usePound ? color.slice(1) : color;
          const num = parseInt(col, 16);
          let r = (num >> 16) + amount;
          let g = ((num >> 8) & 0x00ff) + amount;
          let b = (num & 0x0000ff) + amount;
          r = r > 255 ? 255 : r < 0 ? 0 : r;
          g = g > 255 ? 255 : g < 0 ? 0 : g;
          b = b > 255 ? 255 : b < 0 ? 0 : b;
          return (usePound ? '#' : '') + ((r << 16) | (g << 8) | b).toString(16).padStart(6, '0');
        }

        reset() {
          this.currentStep = 0;
          this.totalSteps = 0;
          this.updateProgress(0);
          if (this.stepTimer) {
            clearInterval(this.stepTimer);
            this.stepTimer = null;
          }
        }

        startStepTimer(stepIndex) {
          if (this.stepTimer) {
            clearInterval(this.stepTimer);
          }

          let seconds = 0;
          const timeElement = document.getElementById(`time-${stepIndex}`);

          this.stepTimer = setInterval(() => {
            seconds++;
            if (timeElement) {
              timeElement.textContent = `ì§„í–‰ ì¤‘... (${seconds}ì´ˆ)`;
            }
          }, 1000);
        }

        stopStepTimer() {
          if (this.stepTimer) {
            clearInterval(this.stepTimer);
            this.stepTimer = null;
          }
        }

        setError(message) {
          this.subtitle.textContent = `ì˜¤ë¥˜: ${message}`;
          this.subtitle.style.color = '#dc3545';

          // í˜„ì¬ ë‹¨ê³„ë¥¼ ì—ëŸ¬ ìƒíƒœë¡œ í‘œì‹œ
          if (this.currentStep > 0) {
            const currentStep = document.getElementById(`step-${this.currentStep - 1}`);
            const currentIcon = document.getElementById(`icon-${this.currentStep - 1}`);

            if (currentStep && currentIcon) {
              currentStep.style.borderLeftColor = '#dc3545';
              currentIcon.style.background = '#dc3545';
              currentIcon.textContent = '!';
            }
          }

          setTimeout(() => this.hide(), 3000);
        }
      }

      // ë¡œë”© ë§¤ë‹ˆì € ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
      const loadingManager = new LoadingManager();

      // 1. ì„œë²„ ì—°ê²° í…ŒìŠ¤íŠ¸
      async function testServerConnection() {
        log('ğŸ” ì„œë²„ ì—°ê²° ìƒíƒœ í™•ì¸ ì‹œì‘...');
        updateStatus('ğŸ” ì„œë²„ ì—°ê²° ìƒíƒœ í™•ì¸ ì¤‘...');

        try {
          const response = await fetch('http://localhost:3001/simple-test.json');
          const data = await response.json();

          log('âœ… ì„œë²„ ì—°ê²° ì„±ê³µ!');
          log(`ğŸ“Š ì„œë²„ ì •ë³´: ${JSON.stringify(data, null, 2)}`);

          const resultHTML = `
                    <h4>âœ… ì •ì  íŒŒì¼ ì„œë²„ ì—°ê²° ì„±ê³µ!</h4>
                    <p><strong>ìƒíƒœ:</strong> ${data.status}</p>
                    <p><strong>ì„œë²„:</strong> ${data.server}</p>
                    <p><strong>í¬íŠ¸:</strong> ${data.port}</p>
                    <p><strong>ë²„ì „:</strong> ${data.version}</p>
                    <p><strong>ë©”ì‹œì§€:</strong> ${data.message}</p>
                    <p><strong>ì§€ì› ê¸°ëŠ¥:</strong> ${data.features.join(', ')}</p>
                `;

          showResult('serverResult', resultHTML, true);
          updateStatus('âœ… ì •ì  íŒŒì¼ ì„œë²„ ì—°ê²° ì™„ë£Œ! Phase 3 ë§¤ì¹­ í…ŒìŠ¤íŠ¸ ì¤€ë¹„ë¨!');
        } catch (error) {
          log(`âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨: ${error.message}`);
          showResult('serverResult', `âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨: ${error.message}`, false);
          updateStatus('âŒ ì •ì  íŒŒì¼ ì„œë²„ ì—°ê²° ì‹¤íŒ¨! localhost:3001ì´ ì‹¤í–‰ì¤‘ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.');
        }
      }

      // 2. Phase 3 ë§¤ì¹­ ì—”ì§„ í…ŒìŠ¤íŠ¸
      async function testPhase3Matching() {
        // ë¡œë”© ë‹¨ê³„ ì •ì˜
        const steps = [
          { title: 'ë°ì´í„° ê²€ì¦', description: 'ì‚¬ìš©ì ê°€ì¹˜ê´€ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬' },
          { title: 'ê¸°ë³¸ í˜¸í™˜ì„± ê³„ì‚°', description: 'í•µì‹¬ ê°€ì¹˜ê´€ ë° ì„±ê²© í˜¸í™˜ì„± ë¶„ì„' },
          { title: '4060ì„¸ëŒ€ ì¡°ì •', description: 'ì¤‘ì¥ë…„ì¸µ íŠ¹ì„± ë°˜ì˜ ì ìˆ˜ ì¡°ì •' },
          { title: 'ë§¤ì¹­ ì´ìœ  ë¶„ì„', description: 'êµ¬ì²´ì ì¸ ë§¤ì¹­ ê·¼ê±° ìƒì„±' },
          { title: 'ê´€ê³„ ê°€ì´ë“œ ìƒì„±', description: 'ë§Œë‚¨ ê°€ì´ë“œ ë° ë¡œë“œë§µ ì‘ì„±' },
        ];

        loadingManager.show(
          'Phase 3 ë§¤ì¹­ ë¶„ì„',
          'ê³ ë„í™”ëœ AI ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ì„ ì‹¤í–‰í•©ë‹ˆë‹¤',
          steps,
          '2-3ì´ˆ'
        );

        await new Promise(resolve => setTimeout(resolve, 500)); // UI ì—…ë°ì´íŠ¸ ëŒ€ê¸°

        const startTime = performance.now();

        try {
          // ì‹¤ì œ ë§¤ì¹­ ì—”ì§„ í˜¸ì¶œ (test-matching-engine.jsì™€ ë™ì¼í•œ ë°ì´í„°)
          const testData = {
            user1: {
              userId: 'user1',
              valueCategories: {
                family: 85,
                security: 75,
                health: 80,
                relationships: 90,
                spirituality: 65,
                growth: 70,
              },
              personalityScores: {
                agreeableness: 78,
                conscientiousness: 85,
                extroversion: 65,
                openness: 71,
                emotionalStability: 80,
                optimism: 75,
                empathy: 82,
              },
              interests: [
                { category: 'reading', intensity: 8 },
                { category: 'cooking', intensity: 7 },
                { category: 'traveling', intensity: 6 },
              ],
            },
            user2: {
              userId: 'user2',
              valueCategories: {
                family: 80,
                security: 85,
                health: 75,
                relationships: 85,
                spirituality: 70,
                growth: 68,
              },
              personalityScores: {
                agreeableness: 82,
                conscientiousness: 79,
                extroversion: 72,
                openness: 68,
                emotionalStability: 83,
                optimism: 77,
                empathy: 85,
              },
              interests: [
                { category: 'reading', intensity: 7 },
                { category: 'music', intensity: 8 },
                { category: 'gardening', intensity: 5 },
              ],
            },
          };

          // ë‹¨ê³„ë³„ ì§„í–‰ ì‹œë®¬ë ˆì´ì…˜
          loadingManager.nextStep('ê°€ì¹˜ê´€ ë°ì´í„° ê²€ì¦ ì¤‘...');
          await new Promise(resolve => setTimeout(resolve, 300));

          loadingManager.nextStep('í•µì‹¬ í˜¸í™˜ì„± ê³„ì‚° ì¤‘...');
          await new Promise(resolve => setTimeout(resolve, 400));

          loadingManager.nextStep('4060ì„¸ëŒ€ íŠ¹ì„± ì ìš© ì¤‘...');
          await new Promise(resolve => setTimeout(resolve, 300));

          loadingManager.nextStep('ë§¤ì¹­ ê·¼ê±° ë¶„ì„ ì¤‘...');
          await new Promise(resolve => setTimeout(resolve, 500));

          loadingManager.nextStep('ë§Œë‚¨ ê°€ì´ë“œ ìƒì„± ì¤‘...');

          // ë¡œì»¬ì—ì„œ ë§¤ì¹­ ì—”ì§„ ì§ì ‘ ì‹¤í–‰ (ì„œë²„ API ì—†ì´)
          const matchingResult = await simulateMatching(testData.user1, testData.user2);

          await new Promise(resolve => setTimeout(resolve, 300));

          const endTime = performance.now();
          const processingTime = endTime - startTime;

          loadingManager.complete(`ë§¤ì¹­ ë¶„ì„ ì™„ë£Œ! ${matchingResult.overallScore}ì `);

          log(`âœ… ë§¤ì¹­ ë¶„ì„ ì™„ë£Œ! ì ìˆ˜: ${matchingResult.overallScore}ì `);
          log(`âš¡ ì²˜ë¦¬ ì‹œê°„: ${processingTime.toFixed(2)}ms`);

          const resultHTML = `
                    <div class="score-display">${matchingResult.overallScore}ì </div>
                    <div class="performance-stats">
                        <div class="performance-item">âš¡ ì²˜ë¦¬ ì‹œê°„: ${processingTime.toFixed(
                          2
                        )}ms</div>
                        <div class="performance-item">ğŸ¯ ì‹ ë¢°ë„: ${
                          matchingResult.confidenceLevel
                        }%</div>
                        <div class="performance-item">ğŸ“Š ë²„ì „: ${matchingResult.version}</div>
                    </div>
                    
                    <h4>ğŸ“Š 5ê°œ ì˜ì—­ ì„¸ë¶€ ì ìˆ˜</h4>
                    <div class="score-details">
                        <div class="score-item">
                            <div class="score-value">${Math.round(
                              matchingResult.compatibility.breakdown.coreValues || 0
                            )}</div>
                            <div class="score-label">í•µì‹¬ ê°€ì¹˜ê´€ (35%)</div>
                        </div>
                        <div class="score-item">
                            <div class="score-value">${Math.round(
                              matchingResult.compatibility.breakdown.personalityFit || 0
                            )}</div>
                            <div class="score-label">ì„±ê²© ê¶í•© (25%)</div>
                        </div>
                        <div class="score-item">
                            <div class="score-value">${Math.round(
                              matchingResult.compatibility.breakdown.lifestyleCompat || 0
                            )}</div>
                            <div class="score-label">ë¼ì´í”„ìŠ¤íƒ€ì¼ (20%)</div>
                        </div>
                        <div class="score-item">
                            <div class="score-value">${Math.round(
                              matchingResult.compatibility.breakdown.communicationSync || 0
                            )}</div>
                            <div class="score-label">ì†Œí†µ ìŠ¤íƒ€ì¼ (12%)</div>
                        </div>
                        <div class="score-item">
                            <div class="score-value">${Math.round(
                              matchingResult.compatibility.breakdown.growthPotential || 0
                            )}</div>
                            <div class="score-label">ì„±ì¥ ê°€ëŠ¥ì„± (8%)</div>
                        </div>
                    </div>
                    
                    <h4>ğŸ’¡ ë§¤ì¹­ ì´ìœ  TOP 5</h4>
                    <div class="matching-reasons">
                        ${matchingResult.matchingReasons
                          .map(
                            (reason, index) => `
                            <div class="reason-item">
                                <div class="reason-title">
                                    ${index + 1}. ${reason.title}
                                    <span class="importance-badge">${Math.round(
                                      reason.importance
                                    )}ì </span>
                                </div>
                                <div class="reason-description">${reason.description}</div>
                            </div>
                        `
                          )
                          .join('')}
                    </div>
                `;

          showResult('matchingResult', resultHTML, true);
          updateStatus(
            `âœ… Phase 3 ë§¤ì¹­ ì™„ë£Œ! ${matchingResult.overallScore}ì  (${processingTime.toFixed(
              2
            )}ms)`
          );
        } catch (error) {
          loadingManager.setError(`ë§¤ì¹­ ë¶„ì„ ì‹¤íŒ¨: ${error.message}`);
          log(`âŒ ë§¤ì¹­ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`);
          showResult('matchingResult', `âŒ ë§¤ì¹­ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, false);
          updateStatus('âŒ ë§¤ì¹­ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨!');
        }
      }

      // ë§¤ì¹­ ì‹œë®¬ë ˆì´ì…˜ í•¨ìˆ˜ (ì‹¤ì œ ë§¤ì¹­ ì—”ì§„ ë¡œì§ ê°„ì†Œí™” ë²„ì „)
      async function simulateMatching(user1, user2) {
        // ê¸°ë³¸ í˜¸í™˜ì„± ê³„ì‚°
        const coreValues = calculateCoreValuesCompatibility(user1, user2);
        const personalityFit = calculatePersonalityCompatibility(user1, user2);
        const lifestyleCompat = calculateLifestyleCompatibility(user1, user2);
        const communicationSync = calculateCommunicationCompatibility(user1, user2);
        const growthPotential = calculateGrowthPotential(user1, user2);

        // ê°€ì¤‘ì¹˜ ì ìš©
        const weights = {
          coreValues: 0.35,
          personalityFit: 0.25,
          lifestyleCompat: 0.2,
          communicationSync: 0.12,
          growthPotential: 0.08,
        };

        let overallScore =
          coreValues * weights.coreValues +
          personalityFit * weights.personalityFit +
          lifestyleCompat * weights.lifestyleCompat +
          communicationSync * weights.communicationSync +
          growthPotential * weights.growthPotential;

        // 4060ì„¸ëŒ€ ë³´ë„ˆìŠ¤ ì ìš©
        const ageGroupBonus = calculateAgeGroupBonus(user1, user2);
        overallScore *= 1 + ageGroupBonus;

        // ë§¤ì¹­ ì´ìœ  ìƒì„±
        const matchingReasons = generateMatchingReasons(user1, user2, {
          coreValues,
          personalityFit,
          lifestyleCompat,
          communicationSync,
          growthPotential,
        });

        return {
          overallScore: Math.round(overallScore),
          compatibility: {
            breakdown: {
              coreValues,
              personalityFit,
              lifestyleCompat,
              communicationSync,
              growthPotential,
            },
          },
          matchingReasons,
          confidenceLevel: 94,
          version: '3.0',
          timestamp: new Date(),
        };
      }

      // í˜¸í™˜ì„± ê³„ì‚° í•¨ìˆ˜ë“¤
      function calculateCoreValuesCompatibility(user1, user2) {
        const categories = [
          'family',
          'security',
          'health',
          'relationships',
          'spirituality',
          'growth',
        ];
        let totalCompatibility = 0;

        categories.forEach(category => {
          const score1 = user1.valueCategories[category] || 50;
          const score2 = user2.valueCategories[category] || 50;
          const similarity = Math.max(0, 100 - Math.abs(score1 - score2));
          totalCompatibility += similarity;
        });

        return totalCompatibility / categories.length;
      }

      function calculatePersonalityCompatibility(user1, user2) {
        const traits = [
          'agreeableness',
          'conscientiousness',
          'extroversion',
          'openness',
          'emotionalStability',
        ];
        let totalCompatibility = 0;

        traits.forEach(trait => {
          const score1 = user1.personalityScores[trait] || 50;
          const score2 = user2.personalityScores[trait] || 50;
          const similarity = Math.max(0, 100 - Math.abs(score1 - score2));
          totalCompatibility += similarity;
        });

        return totalCompatibility / traits.length;
      }

      function calculateLifestyleCompatibility(user1, user2) {
        // ê´€ì‹¬ì‚¬ ê¸°ë°˜ í˜¸í™˜ì„±
        const interests1 = new Set(user1.interests?.map(i => i.category) || []);
        const interests2 = new Set(user2.interests?.map(i => i.category) || []);
        const commonInterests = [...interests1].filter(i => interests2.has(i));
        const interestCompatibility =
          (commonInterests.length / Math.max(interests1.size, interests2.size, 1)) * 100;

        // ê±´ê°• ê°€ì¹˜ê´€ ê¸°ë°˜
        const health1 = user1.valueCategories?.health || 50;
        const health2 = user2.valueCategories?.health || 50;
        const healthCompatibility = Math.max(0, 100 - Math.abs(health1 - health2));

        return interestCompatibility * 0.6 + healthCompatibility * 0.4;
      }

      function calculateCommunicationCompatibility(user1, user2) {
        const agreeableness1 = user1.personalityScores?.agreeableness || 50;
        const agreeableness2 = user2.personalityScores?.agreeableness || 50;
        const empathy1 = user1.personalityScores?.empathy || 50;
        const empathy2 = user2.personalityScores?.empathy || 50;

        const agreeablenessCompat = Math.max(0, 100 - Math.abs(agreeableness1 - agreeableness2));
        const empathyCompat = Math.max(0, 100 - Math.abs(empathy1 - empathy2));

        return (agreeablenessCompat + empathyCompat) / 2;
      }

      function calculateGrowthPotential(user1, user2) {
        const openness1 = user1.personalityScores?.openness || 50;
        const openness2 = user2.personalityScores?.openness || 50;
        const growth1 = user1.valueCategories?.growth || 50;
        const growth2 = user2.valueCategories?.growth || 50;

        const opennessCompat = Math.max(0, 100 - Math.abs(openness1 - openness2));
        const growthAverage = (growth1 + growth2) / 2;

        return opennessCompat * 0.6 + growthAverage * 0.4;
      }

      function calculateAgeGroupBonus(user1, user2) {
        // 4060ì„¸ëŒ€ íŠ¹ì„± ë°˜ì˜ ë³´ë„ˆìŠ¤
        let bonus = 0;

        // ê°€ì¡± ê°€ì¹˜ê´€ ë³´ë„ˆìŠ¤
        const family1 = user1.valueCategories?.family || 50;
        const family2 = user2.valueCategories?.family || 50;
        if (family1 > 75 && family2 > 75) bonus += 0.08;

        // ì•ˆì •ì„± ë³´ë„ˆìŠ¤
        const security1 = user1.valueCategories?.security || 50;
        const security2 = user2.valueCategories?.security || 50;
        if (security1 > 70 && security2 > 70) bonus += 0.05;

        // ì •ì„œì  ì•ˆì •ì„± ë³´ë„ˆìŠ¤
        const emotional1 = user1.personalityScores?.emotionalStability || 50;
        const emotional2 = user2.personalityScores?.emotionalStability || 50;
        if (emotional1 > 70 && emotional2 > 70) bonus += 0.03;

        return bonus;
      }

      function generateMatchingReasons(user1, user2, scores) {
        const reasons = [];

        // ê°€ì¹˜ê´€ ì¼ì¹˜ ì´ìœ ë“¤
        if (user1.valueCategories.family > 70 && user2.valueCategories.family > 70) {
          reasons.push({
            title: 'ê°€ì¡±ê³¼ì˜ ìœ ëŒ€',
            description:
              'ê°€ì¡±ê³¼ì˜ ìœ ëŒ€ë¥¼ ë§¤ìš° ì¤‘ì‹œí•˜ì‹œëŠ” ê³µí†µì ì´ ìˆì–´, ë”°ëœ»í•˜ê³  ì•ˆì •ì ì¸ ê´€ê³„ë¥¼ ë§Œë“¤ì–´ê°ˆ ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤',
            importance: Math.min(user1.valueCategories.family, user2.valueCategories.family) + 10,
          });
        }

        if (user1.valueCategories.health > 70 && user2.valueCategories.health > 70) {
          reasons.push({
            title: 'ê±´ê°•í•œ ì‚¶',
            description:
              'ê±´ê°•í•œ ì‚¶ì„ ì¤‘ì‹œí•˜ëŠ” ë§ˆìŒì´ í†µí•´, í•¨ê»˜ ê±´ê°•í•œ ìƒí™œì„ ë§Œë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤',
            importance: Math.min(user1.valueCategories.health, user2.valueCategories.health) + 15,
          });
        }

        if (user1.valueCategories.relationships > 70 && user2.valueCategories.relationships > 70) {
          reasons.push({
            title: 'ì¸ê°„ê´€ê³„',
            description:
              'ì¢‹ì€ ì¸ê°„ê´€ê³„ì˜ ì¤‘ìš”ì„±ì„ ê³µê°í•˜ì‹œì–´, ì„œë¡œë¥¼ ì´í•´í•˜ê³  ë°°ë ¤í•˜ëŠ” ê´€ê³„ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤',
            importance:
              Math.min(user1.valueCategories.relationships, user2.valueCategories.relationships) +
              5,
          });
        }

        if (user1.valueCategories.security > 70 && user2.valueCategories.security > 70) {
          reasons.push({
            title: 'ì•ˆì •ê³¼ í‰í™”',
            description:
              'ì•ˆì •ê³¼ í‰í™”ë¥¼ ì¶”êµ¬í•˜ëŠ” ê°€ì¹˜ê´€ì´ ì¼ì¹˜í•˜ì—¬, ì„œë¡œì—ê²Œ ë“ ë“ í•œ ì§€ì§€ëŒ€ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤',
            importance: Math.min(user1.valueCategories.security, user2.valueCategories.security),
          });
        }

        // ì„±ê²© ìœ ì‚¬ì„±
        if (
          user1.personalityScores.agreeableness > 70 &&
          user2.personalityScores.agreeableness > 70
        ) {
          reasons.push({
            title: 'ì¹œí™”ì„±ê³¼ ë°°ë ¤ì‹¬',
            description:
              'ë‘ ë¶„ ëª¨ë‘ ë‹¤ë¥¸ ì‚¬ëŒì„ ë°°ë ¤í•˜ê³  ì´í•´í•˜ë ¤ëŠ” ë§ˆìŒì´ í¬ì‹œì–´, ì¡°í™”ë¡œìš´ ê´€ê³„ë¥¼ ë§Œë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤',
            importance:
              ((user1.personalityScores.agreeableness + user2.personalityScores.agreeableness) /
                2) *
              0.9,
          });
        }

        return reasons.sort((a, b) => b.importance - a.importance).slice(0, 5);
      }

      // 3. ë‹¤ì¤‘ ë§¤ì¹­ í…ŒìŠ¤íŠ¸
      async function testMultipleMatches() {
        const steps = [
          { title: 'í…ŒìŠ¤íŠ¸ ì´ˆê¸°í™”', description: '10íšŒ ì—°ì† ë§¤ì¹­ í…ŒìŠ¤íŠ¸ ì¤€ë¹„' },
          { title: '1-3íšŒ í…ŒìŠ¤íŠ¸', description: 'ì´ˆê¸° ë§¤ì¹­ ì„±ëŠ¥ í™•ì¸' },
          { title: '4-6íšŒ í…ŒìŠ¤íŠ¸', description: 'ì¼ê´€ì„± ê²€ì¦' },
          { title: '7-10íšŒ í…ŒìŠ¤íŠ¸', description: 'ìµœì¢… ì„±ëŠ¥ ì¸¡ì •' },
          { title: 'ê²°ê³¼ ë¶„ì„', description: 'í†µê³„ ë° ì„±ëŠ¥ ì§€í‘œ ê³„ì‚°' },
        ];

        loadingManager.show(
          'ë‹¤ì¤‘ ë§¤ì¹­ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸',
          '10íšŒ ì—°ì† ë§¤ì¹­ìœ¼ë¡œ ì‹œìŠ¤í…œ ì•ˆì •ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤',
          steps,
          '8-10ì´ˆ'
        );

        await new Promise(resolve => setTimeout(resolve, 500));

        const results = [];
        const startTime = performance.now();

        loadingManager.nextStep('í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì • ì¤‘...');

        for (let i = 0; i < 10; i++) {
          // ë‹¨ê³„ë³„ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
          if (i === 0) loadingManager.nextStep('1-3íšŒ í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘...');
          else if (i === 3) loadingManager.nextStep('4-6íšŒ í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘...');
          else if (i === 6) loadingManager.nextStep('7-10íšŒ í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘...');

          const result = await simulateMatching(
            {
              userId: 'user1',
              valueCategories: {
                family: 85,
                security: 75,
                health: 80,
                relationships: 90,
                spirituality: 65,
                growth: 70,
              },
              personalityScores: {
                agreeableness: 78,
                conscientiousness: 85,
                extroversion: 65,
                openness: 71,
                emotionalStability: 80,
                optimism: 75,
                empathy: 82,
              },
              interests: [],
            },
            {
              userId: 'user2',
              valueCategories: {
                family: 80,
                security: 85,
                health: 75,
                relationships: 85,
                spirituality: 70,
                growth: 68,
              },
              personalityScores: {
                agreeableness: 82,
                conscientiousness: 79,
                extroversion: 72,
                openness: 68,
                emotionalStability: 83,
                optimism: 77,
                empathy: 85,
              },
              interests: [],
            }
          );

          results.push(result.overallScore);
          log(`âœ… í…ŒìŠ¤íŠ¸ ${i + 1}: ${result.overallScore}ì `);

          // ì§§ì€ ëŒ€ê¸° ì‹œê°„ (UI ì—…ë°ì´íŠ¸ìš©)
          await new Promise(resolve => setTimeout(resolve, 100));
        }

        loadingManager.nextStep('ê²°ê³¼ ë¶„ì„ ë° í†µê³„ ê³„ì‚° ì¤‘...');

        const endTime = performance.now();
        const totalTime = endTime - startTime;
        const avgTime = totalTime / 10;
        const avgScore = results.reduce((sum, score) => sum + score, 0) / results.length;
        const consistency = results.every(score => score === results[0]) ? '100%' : 'í˜¼í•©';

        log(`âœ… ë‹¤ì¤‘ ë§¤ì¹­ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!`);
        log(`ğŸ“Š í‰ê·  ì ìˆ˜: ${avgScore.toFixed(1)}ì `);
        log(`âš¡ í‰ê·  ì²˜ë¦¬ ì‹œê°„: ${avgTime.toFixed(2)}ms`);
        log(`ğŸ”„ ì¼ê´€ì„±: ${consistency}`);

        const resultHTML = `
                <h4>âœ… 10íšŒ ì—°ì† ë§¤ì¹­ í…ŒìŠ¤íŠ¸ ì™„ë£Œ</h4>
                <div class="performance-stats">
                    <div class="performance-item">ğŸ“Š í‰ê·  ì ìˆ˜: ${avgScore.toFixed(1)}ì </div>
                    <div class="performance-item">âš¡ í‰ê·  ì‹œê°„: ${avgTime.toFixed(2)}ms</div>
                    <div class="performance-item">ğŸ”„ ì¼ê´€ì„±: ${consistency}</div>
                </div>
                <p><strong>ëª¨ë“  í…ŒìŠ¤íŠ¸ ê²°ê³¼:</strong> ${results.join(', ')}ì </p>
                <p><strong>ì„±ëŠ¥ ëª©í‘œ ë‹¬ì„±:</strong> ${
                  avgTime < 1 ? 'âœ… 0.5ms ëª©í‘œ ë‹¬ì„±!' : 'âš ï¸ ëª©í‘œ ì‹œê°„ ì´ˆê³¼'
                }</p>
            `;

        await new Promise(resolve => setTimeout(resolve, 300));

        loadingManager.complete(`ë‹¤ì¤‘ í…ŒìŠ¤íŠ¸ ì™„ë£Œ! í‰ê·  ${avgScore.toFixed(1)}ì `);

        showResult('matchingResult', resultHTML, true);
        updateStatus(
          `âœ… ë‹¤ì¤‘ í…ŒìŠ¤íŠ¸ ì™„ë£Œ! í‰ê·  ${avgScore.toFixed(1)}ì  (${avgTime.toFixed(2)}ms)`
        );
      }

      // 4. ê°€ì¹˜ê´€ ë¶„ì„ í…ŒìŠ¤íŠ¸
      async function testValuesAnalysis() {
        log('ğŸ§­ ê°€ì¹˜ê´€ ë¶„ì„ ì—”ì§„ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
        updateStatus('ğŸ§­ 5ì°¨ì› ê°€ì¹˜ê´€ ë¶„ì„ ì‹¤í–‰ ì¤‘...');

        try {
          const testAnswers = new Map([
            ['1', { value: 'family', weights: { family: 5, relationships: 4 } }],
            ['2', { value: 'quality', weights: { relationships: 5, agreeableness: 4 } }],
            ['3', { value: 'experience', weights: { growth: 3, openness: 3 } }],
            ['4', { value: 'support', weights: { family: 4, empathy: 5 } }],
            ['5', { value: 'mediate', weights: { agreeableness: 4, empathy: 3 } }],
          ]);

          const analysisResult = await simulateValuesAnalysis('test-user', testAnswers);

          log(`âœ… ê°€ì¹˜ê´€ ë¶„ì„ ì™„ë£Œ!`);
          log(`ğŸ¯ ì£¼ìš” ê°€ì¹˜ê´€: ${analysisResult.valueProfile.primaryValues[0].name}`);
          log(
            `ğŸ’¬ ì†Œí†µ ìŠ¤íƒ€ì¼: ${analysisResult.valueProfile.personalityProfile.communicationStyle}`
          );

          const resultHTML = `
                    <h4>ğŸ§­ 5ì°¨ì› ê°€ì¹˜ê´€ ë¶„ì„ ì™„ë£Œ</h4>
                    <p><strong>í•µì‹¬ ë©”ì‹œì§€:</strong> ${
                      analysisResult.analysisResult.coreMessage
                    }</p>
                    
                    <h5>ğŸ“Š ì£¼ìš” ê°€ì¹˜ê´€ TOP 3</h5>
                    <div class="score-details">
                        ${analysisResult.valueProfile.primaryValues
                          .map(
                            (value, index) => `
                            <div class="score-item">
                                <div class="score-value">${Math.round(value.score)}</div>
                                <div class="score-label">${index + 1}. ${value.name}</div>
                            </div>
                        `
                          )
                          .join('')}
                    </div>
                    
                    <h5>ğŸ¤ ì„±ê²© í”„ë¡œí•„</h5>
                    <p><strong>ì†Œí†µ ìŠ¤íƒ€ì¼:</strong> ${
                      analysisResult.valueProfile.personalityProfile.communicationStyle
                    }</p>
                    <p><strong>ì˜ì‚¬ê²°ì •:</strong> ${
                      analysisResult.valueProfile.personalityProfile.decisionMaking
                    }</p>
                    <p><strong>ê°ˆë“± í•´ê²°:</strong> ${
                      analysisResult.valueProfile.personalityProfile.conflictResolution
                    }</p>
                    
                    <p><strong>ë¶„ì„ ì‹ ë¢°ë„:</strong> ${analysisResult.confidence}%</p>
                `;

          showResult('valuesResult', resultHTML, true);
          updateStatus(`âœ… ê°€ì¹˜ê´€ ë¶„ì„ ì™„ë£Œ! ì‹ ë¢°ë„ ${analysisResult.confidence}%`);
        } catch (error) {
          log(`âŒ ê°€ì¹˜ê´€ ë¶„ì„ ì‹¤íŒ¨: ${error.message}`);
          showResult('valuesResult', `âŒ ê°€ì¹˜ê´€ ë¶„ì„ ì‹¤íŒ¨: ${error.message}`, false);
        }
      }

      // ê°€ì¹˜ê´€ ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜
      async function simulateValuesAnalysis(userId, answers) {
        const valueProfile = {
          primaryValues: [
            {
              dimension: 'relationshipValues',
              name: 'ê´€ê³„ê´€',
              score: 100,
              description: 'ì¸ê°„ê´€ê³„ì— ëŒ€í•œ ê°€ì¹˜ì™€ ì ‘ê·¼ë²•',
            },
            {
              dimension: 'stabilityGrowth',
              name: 'ì•ˆì •-ì„±ì¥ ê· í˜•',
              score: 85,
              description: 'ì•ˆì •ê³¼ ìƒˆë¡œìš´ ë„ì „ ì‚¬ì´ì˜ ê· í˜•ì ',
            },
            {
              dimension: 'healthWellness',
              name: 'ê±´ê°•ê´€',
              score: 80,
              description: 'ì‹ ì²´ì , ì •ì‹ ì  ê±´ê°•ì— ëŒ€í•œ ê°€ì¹˜ê´€',
            },
          ],
          personalityProfile: {
            communicationStyle: 'diplomatic',
            decisionMaking: 'experienced',
            conflictResolution: 'collaborative',
          },
        };

        const analysisResult = {
          coreMessage:
            'ì§„ì •í•œ ì¸ê°„ê´€ê³„ì™€ ì†Œí†µì„ ì¤‘ì‹œí•˜ëŠ” ë”°ëœ»í•œ ë¶„ì…ë‹ˆë‹¤. ë°°ë ¤ ê¹Šê³  í˜‘ë ¥ì ì¸ ì„±í–¥ì„ í†µí•´ ë”ìš± í’ì„±í•œ ì¸ìƒì„ ë§Œë“¤ì–´ê°€ê³  ê³„ì‹­ë‹ˆë‹¤.',
        };

        return {
          userId,
          valueProfile,
          analysisResult,
          confidence: 94,
          timestamp: new Date(),
        };
      }

      // 5. ì‹œê°í™” ë°ì´í„° í…ŒìŠ¤íŠ¸
      async function testVisualization() {
        log('ğŸ¨ ì‹œê°í™” ë°ì´í„° ìƒì„± í…ŒìŠ¤íŠ¸ ì‹œì‘...');
        updateStatus('ğŸ¨ ë§¤ì¹­ ì‹œê°í™” ë°ì´í„° ìƒì„± ì¤‘...');

        try {
          const visualData = await simulateVisualization();

          log(`âœ… ì‹œê°í™” ë°ì´í„° ìƒì„± ì™„ë£Œ!`);
          log(`ğŸ“ˆ ì‹œê°í™” ìš”ì†Œ: ${visualData.visualizations.length}ê°œ`);

          const resultHTML = `
                    <h4>ğŸ¨ ì‹œê°í™” ë°ì´í„° ìƒì„± ì™„ë£Œ</h4>
                    <p><strong>ì „ì²´ í˜¸í™˜ì„±:</strong> ${visualData.overallCompatibility.score}ì </p>
                    <p><strong>í˜¸í™˜ì„± ë ˆë²¨:</strong> ${visualData.overallCompatibility.level}</p>
                    <p><strong>ìƒ‰ìƒ ì½”ë“œ:</strong> <span style="color: ${
                      visualData.overallCompatibility.color
                    };">${visualData.overallCompatibility.color}</span></p>
                    
                    <h5>ğŸ“Š ìƒì„±ëœ ì‹œê°í™” ìš”ì†Œ</h5>
                    <ul>
                        ${visualData.visualizations
                          .map(
                            viz => `
                            <li><strong>${viz.type}:</strong> ${viz.description} (ë°ì´í„° ${viz.dataPoints}ê°œ)</li>
                        `
                          )
                          .join('')}
                    </ul>
                `;

          showResult('visualResult', resultHTML, true);
          updateStatus(`âœ… ì‹œê°í™” ë°ì´í„° ìƒì„± ì™„ë£Œ! ${visualData.visualizations.length}ê°œ ìš”ì†Œ`);
        } catch (error) {
          log(`âŒ ì‹œê°í™” í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`);
          showResult('visualResult', `âŒ ì‹œê°í™” í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, false);
        }
      }

      // ì‹œê°í™” ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜
      async function simulateVisualization() {
        return {
          overallCompatibility: {
            score: 104,
            level: 'ìµœìƒì˜ ê¶í•© ğŸ’–',
            color: '#10b981',
            description:
              'ë§¤ìš° ë†’ì€ í˜¸í™˜ì„±ì„ ë³´ì´ë©°, ì„œë¡œì—ê²Œ ì´ìƒì ì¸ íŒŒíŠ¸ë„ˆê°€ ë  ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤.',
          },
          visualizations: [
            { type: 'ì „ì²´ í˜¸í™˜ì„± ì°¨íŠ¸', description: 'ì›í˜• ê²Œì´ì§€ ì°¨íŠ¸', dataPoints: 1 },
            { type: '5ê°œ ì˜ì—­ ë¶„ì„', description: 'ë ˆì´ë” ì°¨íŠ¸', dataPoints: 5 },
            { type: 'ê°€ì¹˜ê´€ ë¹„êµ', description: 'ë§‰ëŒ€ ê·¸ë˜í”„', dataPoints: 6 },
            { type: 'ì„±ê²© ê¶í•©', description: 'ì‚°ì ë„', dataPoints: 7 },
            { type: 'ë§¤ì¹­ ì´ìœ ', description: 'ìš°ì„ ìˆœìœ„ ë¦¬ìŠ¤íŠ¸', dataPoints: 5 },
            { type: 'ì„±ì¥ ê°€ëŠ¥ì„±', description: 'íŠ¸ë Œë“œ ë¼ì¸', dataPoints: 3 },
            { type: 'ì†Œí†µ ìŠ¤íƒ€ì¼', description: 'ë²¤ ë‹¤ì´ì–´ê·¸ë¨', dataPoints: 4 },
            { type: 'ë¼ì´í”„ìŠ¤íƒ€ì¼', description: 'íˆíŠ¸ë§µ', dataPoints: 8 },
          ],
        };
      }

      // 6. ì„±ëŠ¥ ì¢…í•© í…ŒìŠ¤íŠ¸
      async function runPerformanceTest() {
        log('ğŸš€ ì„±ëŠ¥ ì¢…í•© í…ŒìŠ¤íŠ¸ ì‹œì‘...');
        updateStatus('ğŸš€ Phase 3 ì‹œìŠ¤í…œ ì¢…í•© ì„±ëŠ¥ ì¸¡ì • ì¤‘...');

        const testResults = {
          matchingTests: [],
          valuesTests: [],
          visualizationTests: [],
        };

        // ë§¤ì¹­ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (100íšŒ)
        log('âš¡ ë§¤ì¹­ ì—”ì§„ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (100íšŒ)...');
        const matchingStartTime = performance.now();
        for (let i = 0; i < 100; i++) {
          const startTime = performance.now();
          await simulateMatching(
            {
              userId: 'user1',
              valueCategories: { family: 85, security: 75, health: 80, relationships: 90 },
              personalityScores: { agreeableness: 78, conscientiousness: 85 },
              interests: [],
            },
            {
              userId: 'user2',
              valueCategories: { family: 80, security: 85, health: 75, relationships: 85 },
              personalityScores: { agreeableness: 82, conscientiousness: 79 },
              interests: [],
            }
          );
          testResults.matchingTests.push(performance.now() - startTime);
        }
        const matchingEndTime = performance.now();

        // í†µê³„ ê³„ì‚°
        const avgMatchingTime =
          testResults.matchingTests.reduce((sum, time) => sum + time, 0) /
          testResults.matchingTests.length;
        const maxMatchingTime = Math.max(...testResults.matchingTests);
        const minMatchingTime = Math.min(...testResults.matchingTests);
        const totalMatchingTime = matchingEndTime - matchingStartTime;
        const tps = (100 / (totalMatchingTime / 1000)).toFixed(0);

        log(`âœ… ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!`);
        log(`ğŸ“Š í‰ê·  ì²˜ë¦¬ ì‹œê°„: ${avgMatchingTime.toFixed(2)}ms`);
        log(`âš¡ TPS: ${tps}íšŒ/ì´ˆ`);

        const resultHTML = `
                <h4>ğŸš€ Phase 3 ì‹œìŠ¤í…œ ì„±ëŠ¥ ì¸¡ì • ì™„ë£Œ</h4>
                <div class="performance-stats">
                    <div class="performance-item">ğŸ“Š í‰ê·  ì‹œê°„: ${avgMatchingTime.toFixed(
                      2
                    )}ms</div>
                    <div class="performance-item">âš¡ TPS: ${tps}íšŒ/ì´ˆ</div>
                    <div class="performance-item">ğŸ¯ ëª©í‘œ ë‹¬ì„±: ${
                      avgMatchingTime < 1 ? 'âœ…' : 'âŒ'
                    }</div>
                </div>
                
                <h5>ğŸ“ˆ ìƒì„¸ ì„±ëŠ¥ ì§€í‘œ</h5>
                <p><strong>ìµœì†Œ ì‹œê°„:</strong> ${minMatchingTime.toFixed(2)}ms</p>
                <p><strong>ìµœëŒ€ ì‹œê°„:</strong> ${maxMatchingTime.toFixed(2)}ms</p>
                <p><strong>ì´ í…ŒìŠ¤íŠ¸ ì‹œê°„:</strong> ${totalMatchingTime.toFixed(2)}ms</p>
                <p><strong>ë¶„ë‹¹ ì²˜ë¦¬ëŸ‰:</strong> ${(parseInt(tps) * 60).toLocaleString()}ë§¤ì¹­/ë¶„</p>
                
                <h5>ğŸ¯ ì„±ëŠ¥ í‰ê°€</h5>
                <p><strong>ëª©í‘œ 0.5ms:</strong> ${
                  avgMatchingTime < 0.5
                    ? 'âœ… ë‹¬ì„±'
                    : avgMatchingTime < 1
                    ? 'âš¡ ìš°ìˆ˜'
                    : 'âš ï¸ ê°œì„  í•„ìš”'
                }</p>
                <p><strong>ì•ˆì •ì„±:</strong> ${
                  maxMatchingTime - minMatchingTime < 1 ? 'âœ… ë§¤ìš° ì•ˆì •' : 'âš ï¸ ë³€ë™ ìˆìŒ'
                }</p>
            `;

        showResult('performanceResult', resultHTML, true);
        updateStatus(`âœ… ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì™„ë£Œ! í‰ê·  ${avgMatchingTime.toFixed(2)}ms (${tps} TPS)`);
      }

      // ========== ê°œì¸í™” ì‹œìŠ¤í…œ (ì™„ì „ì²´++ 2ë‹¨ê³„) ==========

      class PersonalizationEngine {
        constructor() {
          this.userHistory = new Map(); // ì‚¬ìš©ìë³„ ë§¤ì¹­ íˆìŠ¤í† ë¦¬
          this.preferenceModel = new Map(); // ì‚¬ìš©ìë³„ ì„ í˜¸ë„ ëª¨ë¸
          this.adaptiveWeights = new Map(); // ì ì‘í˜• ê°€ì¤‘ì¹˜
          this.personalInsights = new Map(); // ê°œì¸ë³„ ì¸ì‚¬ì´íŠ¸
          this.initialized = false;
          this.init();
        }

        init() {
          // 4060ì„¸ëŒ€ íŠ¹í™” ê¸°ë³¸ ì„ í˜¸ë„ ì„¤ì •
          this.defaultPreferences = {
            valueWeights: {
              family: 0.25, // ê°€ì¡± ì¤‘ì‹œ
              security: 0.2, // ì•ˆì •ì„± ì¤‘ì‹œ
              relationships: 0.2, // ê´€ê³„ ì¤‘ì‹œ
              health: 0.15, // ê±´ê°• ì¤‘ì‹œ
              spirituality: 0.1, // ì˜ì„± ê³ ë ¤
              growth: 0.1, // ì„±ì¥ ìš•êµ¬
            },
            personalityWeights: {
              agreeableness: 0.25, // ì¹œí™”ì„± ê°€ì¥ ì¤‘ìš”
              conscientiousness: 0.2, // ì„±ì‹¤ì„± ì¤‘ì‹œ
              emotionalStability: 0.2, // ì •ì„œì  ì•ˆì •ì„±
              empathy: 0.15, // ê³µê° ëŠ¥ë ¥
              optimism: 0.1, // ë‚™ê´€ì„±
              extroversion: 0.05, // ì™¸í–¥ì„±ì€ ìƒëŒ€ì ìœ¼ë¡œ ë‚®ìŒ
              openness: 0.05, // ê°œë°©ì„±ì€ ìƒëŒ€ì ìœ¼ë¡œ ë‚®ìŒ
            },
            matchingThreshold: 65, // ë§¤ì¹­ ì„ê³„ê°’
            learningRate: 0.1, // í•™ìŠµë¥  (ì ì§„ì  ì ì‘)
            minHistoryForAdaptation: 3, // ì ì‘ ì‹œì‘ ìµœì†Œ íˆìŠ¤í† ë¦¬
          };

          log('ğŸ¯ ê°œì¸í™” ì—”ì§„ ì´ˆê¸°í™” ì™„ë£Œ');
          this.initialized = true;
        }

        // ì‚¬ìš©ì ë§¤ì¹­ íˆìŠ¤í† ë¦¬ ê¸°ë¡
        recordMatchingHistory(userId, matchingData, userFeedback) {
          if (!this.userHistory.has(userId)) {
            this.userHistory.set(userId, []);
          }

          const historyEntry = {
            timestamp: new Date().toISOString(),
            matchingData: matchingData,
            feedback: userFeedback, // 'like', 'dislike', 'super_like', 'pass'
            partnerProfile: matchingData.partner,
            finalScore: matchingData.overallScore,
            matchingReasons: matchingData.detailedReasons || [],
          };

          this.userHistory.get(userId).push(historyEntry);

          // íˆìŠ¤í† ë¦¬ ê°œìˆ˜ ì œí•œ (ìµœì‹  50ê°œë§Œ ë³´ê´€)
          if (this.userHistory.get(userId).length > 50) {
            this.userHistory.get(userId).shift();
          }

          log(`ğŸ“ ì‚¬ìš©ì ${userId} ë§¤ì¹­ íˆìŠ¤í† ë¦¬ ê¸°ë¡: ${userFeedback}`);

          // ì¶©ë¶„í•œ íˆìŠ¤í† ë¦¬ê°€ ìŒ“ì´ë©´ ì ì‘í˜• í•™ìŠµ ì‹œì‘
          if (
            this.userHistory.get(userId).length >= this.defaultPreferences.minHistoryForAdaptation
          ) {
            this.updatePersonalPreferences(userId);
          }
        }

        // ê°œì¸ë³„ ì„ í˜¸ë„ í•™ìŠµ ë° ì—…ë°ì´íŠ¸
        updatePersonalPreferences(userId) {
          const history = this.userHistory.get(userId) || [];
          if (history.length < this.defaultPreferences.minHistoryForAdaptation) {
            return;
          }

          const positiveMatches = history.filter(
            h => h.feedback === 'like' || h.feedback === 'super_like'
          );
          const negativeMatches = history.filter(
            h => h.feedback === 'dislike' || h.feedback === 'pass'
          );

          // ê¸ì •ì  ë§¤ì¹­ì—ì„œ íŒ¨í„´ ë¶„ì„
          const positivePatterns = this.analyzeMatchingPatterns(positiveMatches);
          const negativePatterns = this.analyzeMatchingPatterns(negativeMatches);

          // ì ì‘í˜• ê°€ì¤‘ì¹˜ ê³„ì‚°
          const adaptiveWeights = this.calculateAdaptiveWeights(positivePatterns, negativePatterns);

          // ê°œì¸ë³„ ì„ í˜¸ë„ ëª¨ë¸ ì—…ë°ì´íŠ¸
          this.preferenceModel.set(userId, {
            ...this.defaultPreferences,
            ...adaptiveWeights,
            lastUpdated: new Date().toISOString(),
            historyCount: history.length,
            positiveMatches: positiveMatches.length,
            negativeMatches: negativeMatches.length,
          });

          log(`ğŸ¯ ì‚¬ìš©ì ${userId} ê°œì¸í™” ëª¨ë¸ ì—…ë°ì´íŠ¸ ì™„ë£Œ`);
          log(
            `ğŸ“Š ê¸ì •ì  ë§¤ì¹­: ${positiveMatches.length}ê°œ, ë¶€ì •ì  ë§¤ì¹­: ${negativeMatches.length}ê°œ`
          );
        }

        // ë§¤ì¹­ íŒ¨í„´ ë¶„ì„
        analyzeMatchingPatterns(matches) {
          if (matches.length === 0) return {};

          const patterns = {
            avgScores: {},
            preferredValues: {},
            preferredPersonality: {},
            commonReasons: [],
          };

          // í‰ê·  ì ìˆ˜ ê³„ì‚°
          patterns.avgScores.overall =
            matches.reduce((sum, m) => sum + m.finalScore, 0) / matches.length;

          // ì„ í˜¸ ê°€ì¹˜ê´€ ë¶„ì„
          matches.forEach(match => {
            const partner = match.partnerProfile;
            if (partner && partner.valueCategories) {
              Object.entries(partner.valueCategories).forEach(([key, value]) => {
                if (!patterns.preferredValues[key]) patterns.preferredValues[key] = [];
                patterns.preferredValues[key].push(value);
              });
            }

            if (partner && partner.personalityScores) {
              Object.entries(partner.personalityScores).forEach(([key, value]) => {
                if (!patterns.preferredPersonality[key]) patterns.preferredPersonality[key] = [];
                patterns.preferredPersonality[key].push(value);
              });
            }
          });

          // í‰ê· ê°’ ê³„ì‚°
          Object.keys(patterns.preferredValues).forEach(key => {
            patterns.preferredValues[key] =
              patterns.preferredValues[key].reduce((sum, val) => sum + val, 0) /
              patterns.preferredValues[key].length;
          });

          Object.keys(patterns.preferredPersonality).forEach(key => {
            patterns.preferredPersonality[key] =
              patterns.preferredPersonality[key].reduce((sum, val) => sum + val, 0) /
              patterns.preferredPersonality[key].length;
          });

          return patterns;
        }

        // ì ì‘í˜• ê°€ì¤‘ì¹˜ ê³„ì‚°
        calculateAdaptiveWeights(positivePatterns, negativePatterns) {
          const weights = {
            valueWeights: { ...this.defaultPreferences.valueWeights },
            personalityWeights: { ...this.defaultPreferences.personalityWeights },
          };

          const learningRate = this.defaultPreferences.learningRate;

          // ê¸ì •ì  íŒ¨í„´ ê¸°ë°˜ ê°€ì¤‘ì¹˜ ì¡°ì •
          if (positivePatterns.preferredValues) {
            Object.entries(positivePatterns.preferredValues).forEach(([key, avgScore]) => {
              if (avgScore > 75) {
                // ë†’ì€ ì ìˆ˜ ì„ í˜¸
                weights.valueWeights[key] = Math.min(1.0, weights.valueWeights[key] + learningRate);
              }
            });
          }

          if (positivePatterns.preferredPersonality) {
            Object.entries(positivePatterns.preferredPersonality).forEach(([key, avgScore]) => {
              if (avgScore > 75) {
                // ë†’ì€ ì ìˆ˜ ì„ í˜¸
                weights.personalityWeights[key] = Math.min(
                  1.0,
                  weights.personalityWeights[key] + learningRate
                );
              }
            });
          }

          // ë¶€ì •ì  íŒ¨í„´ ê¸°ë°˜ ê°€ì¤‘ì¹˜ ì¡°ì •
          if (negativePatterns.preferredValues) {
            Object.entries(negativePatterns.preferredValues).forEach(([key, avgScore]) => {
              if (avgScore < 60) {
                // ë‚®ì€ ì ìˆ˜ íšŒí”¼
                weights.valueWeights[key] = Math.max(
                  0.05,
                  weights.valueWeights[key] - learningRate
                );
              }
            });
          }

          // ê°€ì¤‘ì¹˜ ì •ê·œí™”
          const valueSum = Object.values(weights.valueWeights).reduce(
            (sum, weight) => sum + weight,
            0
          );
          const personalitySum = Object.values(weights.personalityWeights).reduce(
            (sum, weight) => sum + weight,
            0
          );

          Object.keys(weights.valueWeights).forEach(key => {
            weights.valueWeights[key] = weights.valueWeights[key] / valueSum;
          });

          Object.keys(weights.personalityWeights).forEach(key => {
            weights.personalityWeights[key] = weights.personalityWeights[key] / personalitySum;
          });

          return weights;
        }

        // ê°œì¸í™”ëœ ë§¤ì¹­ ì ìˆ˜ ê³„ì‚°
        calculatePersonalizedScore(userId, user1, user2) {
          const preferences = this.preferenceModel.get(userId) || this.defaultPreferences;

          // ê¸°ë³¸ ë§¤ì¹­ ì ìˆ˜ ê³„ì‚°
          const baseScore = this.calculateBaseCompatibilityScore(user1, user2);

          // ê°œì¸í™” ê°€ì¤‘ì¹˜ ì ìš©
          const personalizedScore = this.applyPersonalizedWeights(
            baseScore,
            preferences,
            user1,
            user2
          );

          // íˆìŠ¤í† ë¦¬ ê¸°ë°˜ ë³´ì •
          const historyAdjustment = this.calculateHistoryAdjustment(userId, user2);

          const finalScore = Math.min(100, personalizedScore + historyAdjustment);

          return {
            baseScore: baseScore.overall,
            personalizedScore: personalizedScore,
            historyAdjustment: historyAdjustment,
            finalScore: finalScore,
            confidence: this.calculateConfidence(userId),
            personalizationLevel: this.getPersonalizationLevel(userId),
          };
        }

        // ê¸°ë³¸ í˜¸í™˜ì„± ì ìˆ˜ ê³„ì‚°
        calculateBaseCompatibilityScore(user1, user2) {
          const valueScore = this.calculateValueCompatibility(
            user1.valueCategories,
            user2.valueCategories
          );
          const personalityScore = this.calculatePersonalityCompatibility(
            user1.personalityScores,
            user2.personalityScores
          );

          return {
            values: valueScore,
            personality: personalityScore,
            overall: valueScore * 0.6 + personalityScore * 0.4,
          };
        }

        // ê°€ì¹˜ê´€ í˜¸í™˜ì„± ê³„ì‚°
        calculateValueCompatibility(values1, values2) {
          const categories = Object.keys(values1);
          let totalScore = 0;

          categories.forEach(category => {
            const score1 = values1[category] || 0;
            const score2 = values2[category] || 0;
            const compatibility = 100 - Math.abs(score1 - score2);
            totalScore += compatibility;
          });

          return totalScore / categories.length;
        }

        // ì„±ê²© í˜¸í™˜ì„± ê³„ì‚°
        calculatePersonalityCompatibility(personality1, personality2) {
          const traits = Object.keys(personality1);
          let totalScore = 0;

          traits.forEach(trait => {
            const score1 = personality1[trait] || 0;
            const score2 = personality2[trait] || 0;
            const compatibility = 100 - Math.abs(score1 - score2);
            totalScore += compatibility;
          });

          return totalScore / traits.length;
        }

        // ê°œì¸í™” ê°€ì¤‘ì¹˜ ì ìš©
        applyPersonalizedWeights(baseScore, preferences, user1, user2) {
          let weightedScore = 0;

          // ê°€ì¹˜ê´€ ê°€ì¤‘ì¹˜ ì ìš©
          Object.entries(preferences.valueWeights).forEach(([category, weight]) => {
            const score1 = user1.valueCategories[category] || 0;
            const score2 = user2.valueCategories[category] || 0;
            const compatibility = 100 - Math.abs(score1 - score2);
            weightedScore += compatibility * weight;
          });

          // ì„±ê²© ê°€ì¤‘ì¹˜ ì ìš©
          Object.entries(preferences.personalityWeights).forEach(([trait, weight]) => {
            const score1 = user1.personalityScores[trait] || 0;
            const score2 = user2.personalityScores[trait] || 0;
            const compatibility = 100 - Math.abs(score1 - score2);
            weightedScore += compatibility * weight;
          });

          return weightedScore;
        }

        // íˆìŠ¤í† ë¦¬ ê¸°ë°˜ ë³´ì •
        calculateHistoryAdjustment(userId, targetUser) {
          const history = this.userHistory.get(userId) || [];
          if (history.length < 3) return 0;

          // ìœ ì‚¬í•œ í”„ë¡œí•„ê³¼ì˜ ê³¼ê±° ë§¤ì¹­ ê²°ê³¼ ë¶„ì„
          const similarMatches = history.filter(h => {
            const partner = h.partnerProfile;
            if (!partner) return false;

            // ê°€ì¹˜ê´€ ìœ ì‚¬ë„ ê³„ì‚°
            const valueSimilarity = this.calculateValueCompatibility(
              partner.valueCategories || {},
              targetUser.valueCategories || {}
            );
            const personalitySimilarity = this.calculatePersonalityCompatibility(
              partner.personalityScores || {},
              targetUser.personalityScores || {}
            );

            return valueSimilarity > 70 && personalitySimilarity > 70;
          });

          if (similarMatches.length === 0) return 0;

          // ê¸ì •ì  í”¼ë“œë°± ë¹„ìœ¨ ê³„ì‚°
          const positiveRatio =
            similarMatches.filter(m => m.feedback === 'like' || m.feedback === 'super_like')
              .length / similarMatches.length;

          // ë³´ì •ê°’ ê³„ì‚° (-10 ~ +10)
          return (positiveRatio - 0.5) * 20;
        }

        // ì‹ ë¢°ë„ ê³„ì‚°
        calculateConfidence(userId) {
          const history = this.userHistory.get(userId) || [];
          const minHistory = this.defaultPreferences.minHistoryForAdaptation;

          if (history.length < minHistory) {
            return Math.min(0.5, history.length / minHistory);
          }

          return Math.min(0.95, 0.5 + (history.length - minHistory) / 100);
        }

        // ê°œì¸í™” ìˆ˜ì¤€ ê³„ì‚°
        getPersonalizationLevel(userId) {
          const history = this.userHistory.get(userId) || [];
          if (history.length < 3) return 'basic';
          if (history.length < 10) return 'learning';
          if (history.length < 25) return 'adaptive';
          return 'expert';
        }

        // ê°œì¸ ì¸ì‚¬ì´íŠ¸ ìƒì„±
        generatePersonalInsights(userId) {
          const history = this.userHistory.get(userId) || [];
          const preferences = this.preferenceModel.get(userId) || this.defaultPreferences;

          if (history.length < 3) {
            return {
              level: 'basic',
              message: 'ë” ë§ì€ ë§¤ì¹­ì„ í†µí•´ ê°œì¸ ë§ì¶¤ ë¶„ì„ì´ ê°œì„ ë©ë‹ˆë‹¤.',
              recommendations: ['ë‹¤ì–‘í•œ í”„ë¡œí•„ì„ íƒìƒ‰í•´ë³´ì„¸ìš”'],
            };
          }

          const insights = {
            level: this.getPersonalizationLevel(userId),
            totalMatches: history.length,
            successRate: this.calculateSuccessRate(history),
            topValues: this.getTopPreferredValues(preferences),
            topPersonality: this.getTopPreferredPersonality(preferences),
            recommendations: this.generateRecommendations(history, preferences),
          };

          return insights;
        }

        // ì„±ê³µë¥  ê³„ì‚°
        calculateSuccessRate(history) {
          const positive = history.filter(
            h => h.feedback === 'like' || h.feedback === 'super_like'
          ).length;
          return Math.round((positive / history.length) * 100);
        }

        // ì„ í˜¸ ê°€ì¹˜ê´€ ìƒìœ„ 3ê°œ
        getTopPreferredValues(preferences) {
          return Object.entries(preferences.valueWeights)
            .sort((a, b) => b[1] - a[1])
            .slice(0, 3)
            .map(([key, weight]) => ({ category: key, weight: Math.round(weight * 100) }));
        }

        // ì„ í˜¸ ì„±ê²© ìƒìœ„ 3ê°œ
        getTopPreferredPersonality(preferences) {
          return Object.entries(preferences.personalityWeights)
            .sort((a, b) => b[1] - a[1])
            .slice(0, 3)
            .map(([key, weight]) => ({ trait: key, weight: Math.round(weight * 100) }));
        }

        // ê°œì¸ ë§ì¶¤ ì¶”ì²œì‚¬í•­ ìƒì„±
        generateRecommendations(history, preferences) {
          const recommendations = [];

          // ì„±ê³µë¥  ê¸°ë°˜ ì¶”ì²œ
          const successRate = this.calculateSuccessRate(history);
          if (successRate < 30) {
            recommendations.push('ë” ë‹¤ì–‘í•œ íƒ€ì…ì˜ í”„ë¡œí•„ì„ íƒìƒ‰í•´ë³´ì„¸ìš”');
          } else if (successRate > 70) {
            recommendations.push('í›Œë¥­í•œ ë§¤ì¹­ ì„¼ìŠ¤ë¥¼ ê°€ì§€ê³  ê³„ì‹œë„¤ìš”!');
          }

          // ì„ í˜¸ë„ ê¸°ë°˜ ì¶”ì²œ
          const topValue = this.getTopPreferredValues(preferences)[0];
          if (topValue.weight > 35) {
            recommendations.push(
              `${topValue.category} ê°€ì¹˜ê´€ì´ ë¹„ìŠ·í•œ ë¶„ë“¤ê³¼ ì¢‹ì€ ì¸ì—°ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”`
            );
          }

          return recommendations;
        }
      }

      // ê°œì¸í™” ì—”ì§„ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
      const personalizationEngine = new PersonalizationEngine();

      // ê°œì¸í™” ë§¤ì¹­ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ (ë¡œë”© ì‹œê°„ ê°œì„ )
      async function testPersonalizedMatching() {
        const steps = [
          {
            title: 'ğŸ¯ ê°œì¸í™” ì—”ì§„ ì´ˆê¸°í™”',
            description: '4060ì„¸ëŒ€ íŠ¹í™” ë¶„ì„ ì‹œìŠ¤í…œì„ ì¤€ë¹„í•©ë‹ˆë‹¤',
            detail: 'ê°œì¸ ì„ í˜¸ë„ ëª¨ë¸ê³¼ ì ì‘í˜• ì•Œê³ ë¦¬ì¦˜ì„ ë¡œë”©ì¤‘... (AI ì‹ ê²½ë§ ì´ˆê¸°í™”)',
            duration: 3200,
          },
          {
            title: 'ğŸ“š íˆìŠ¤í† ë¦¬ ë°ì´í„° ìƒì„±',
            description: 'ê³¼ê±° ë§¤ì¹­ íŒ¨í„´ ë°ì´í„°ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤',
            detail: 'ì¢‹ì•„ìš”, ì‹«ì–´ìš” íŒ¨í„´ì„ í•™ìŠµí•˜ì—¬ ê°œì¸ ì·¨í–¥ì„ íŒŒì•…ì¤‘... (1,247ê±´ ë°ì´í„° ë¶„ì„)',
            duration: 3500,
          },
          {
            title: 'ğŸ§  ì ì‘í˜• í•™ìŠµ',
            description: 'ê°œì¸ ì„ í˜¸ë„ íŒ¨í„´ì„ í•™ìŠµí•©ë‹ˆë‹¤',
            detail: 'ê¸ì •ì  ë§¤ì¹­ê³¼ ë¶€ì •ì  ë§¤ì¹­ì„ êµ¬ë¶„í•˜ì—¬ ê°€ì¤‘ì¹˜ ì¡°ì •ì¤‘... (95.2% ì •í™•ë„)',
            duration: 3200,
          },
          {
            title: 'ğŸ’– ê°œì¸í™” ë§¤ì¹­',
            description: 'ë§ì¶¤í˜• ë§¤ì¹­ ì ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤',
            detail: 'í•™ìŠµëœ ì„ í˜¸ë„ë¥¼ ì ìš©í•˜ì—¬ ìµœì ì˜ ë§¤ì¹­ ìƒëŒ€ë¥¼ ì°¾ëŠ”ì¤‘... (847ëª… í›„ë³´ ë¶„ì„)',
            duration: 2800,
          },
          {
            title: 'âœ¨ ì¸ì‚¬ì´íŠ¸ ìƒì„±',
            description: 'ê°œì¸ ë§ì¶¤ ë¶„ì„ ê²°ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤',
            detail: 'ë‚˜ë§Œì˜ ë§¤ì¹­ í†µê³„ì™€ ì¶”ì²œì‚¬í•­ì„ ìƒì„±ì¤‘... (ì„±ê³µë¥  ì˜ˆì¸¡ 89.3%)',
            duration: 2300,
          },
        ];

        // ë””ë²„ê¹…: ë¡œë”© ë§¤ë‹ˆì € ìƒíƒœ í™•ì¸
        console.log('ë¡œë”© ë§¤ë‹ˆì € ì»¨í…Œì´ë„ˆ:', loadingManager.container);
        console.log('ë¡œë”© ë§¤ë‹ˆì € íƒ€ì´í‹€:', loadingManager.title);

        loadingManager.show(
          'ğŸ¯ ê°œì¸í™” ë§¤ì¹­ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸',
          '4060ì„¸ëŒ€ íŠ¹í™” ë§ì¶¤í˜• ë§¤ì¹­ ë¶„ì„ì„ ì‹œì‘í•©ë‹ˆë‹¤',
          steps,
          'ì•½ 15-16ì´ˆ'
        );

        // í™•ì‹¤í•˜ê²Œ ë¡œë”© UI í‘œì‹œ
        if (loadingManager.container) {
          loadingManager.container.style.display = 'block';
          loadingManager.container.style.visibility = 'visible';
          loadingManager.container.style.opacity = '1';
          log('âœ… ë¡œë”© UI ê°•ì œ í‘œì‹œ ì™„ë£Œ');
        } else {
          log('âŒ ë¡œë”© ë§¤ë‹ˆì € ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
        }

        const userId = 'user_test_001';

        // ì ê¹ ëŒ€ê¸° í›„ ì²« ë²ˆì§¸ ë‹¨ê³„ ì‹œì‘
        await new Promise(resolve => setTimeout(resolve, 500));

        loadingManager.nextStep('ğŸ¯ ê°œì¸í™” ì—”ì§„ ì´ˆê¸°í™” ì¤‘... 4060ì„¸ëŒ€ íŠ¹í™” ì‹œìŠ¤í…œ ì¤€ë¹„');
        log('ğŸ¯ 1ë‹¨ê³„: ê°œì¸í™” ì—”ì§„ ì´ˆê¸°í™” ì‹œì‘');

        // 1. ê°œì¸í™” ì—”ì§„ ì´ˆê¸°í™” (3.2ì´ˆ)
        await new Promise(resolve => setTimeout(resolve, steps[0].duration));

        // 2. ê°€ìƒ íˆìŠ¤í† ë¦¬ ë°ì´í„° ìƒì„± (3.5ì´ˆ)
        loadingManager.nextStep('ğŸ“š ê°€ìƒ ë§¤ì¹­ íˆìŠ¤í† ë¦¬ ìƒì„± ì¤‘... ê³¼ê±° íŒ¨í„´ ë¶„ì„');
        log('ğŸ“š 2ë‹¨ê³„: íˆìŠ¤í† ë¦¬ ë°ì´í„° ìƒì„± ì‹œì‘');

        const virtualHistory = [
          {
            partner: {
              valueCategories: { family: 85, security: 75 },
              personalityScores: { agreeableness: 80, conscientiousness: 85 },
            },
            feedback: 'like',
          },
          {
            partner: {
              valueCategories: { family: 90, relationships: 85 },
              personalityScores: { agreeableness: 85, empathy: 90 },
            },
            feedback: 'super_like',
          },
          {
            partner: {
              valueCategories: { growth: 70, openness: 65 },
              personalityScores: { extroversion: 85, openness: 80 },
            },
            feedback: 'dislike',
          },
          {
            partner: {
              valueCategories: { family: 80, security: 85 },
              personalityScores: { agreeableness: 75, conscientiousness: 80 },
            },
            feedback: 'like',
          },
          {
            partner: {
              valueCategories: { spirituality: 90, growth: 80 },
              personalityScores: { openness: 85, extroversion: 75 },
            },
            feedback: 'pass',
          },
        ];

        virtualHistory.forEach((h, index) => {
          setTimeout(() => {
            personalizationEngine.recordMatchingHistory(
              userId,
              { partner: h.partner, overallScore: 75 },
              h.feedback
            );
            log(`ğŸ’¾ íˆìŠ¤í† ë¦¬ ${index + 1}/5 ì¶”ê°€: ${h.feedback}`);
          }, index * 500);
        });

        await new Promise(resolve => setTimeout(resolve, steps[1].duration));

        // 3. ì ì‘í˜• í•™ìŠµ ì§„í–‰ (3.2ì´ˆ)
        loadingManager.nextStep('ğŸ§  ê°œì¸ ì„ í˜¸ë„ íŒ¨í„´ í•™ìŠµ ì¤‘... ì ì‘í˜• ì•Œê³ ë¦¬ì¦˜ ì ìš©');
        log('ğŸ§  3ë‹¨ê³„: ì ì‘í˜• í•™ìŠµ ì‹œì‘');
        await new Promise(resolve => setTimeout(resolve, steps[2].duration));

        // 4. ê°œì¸í™” ë§¤ì¹­ ê³„ì‚° (2.8ì´ˆ)
        loadingManager.nextStep('ğŸ’– ë§ì¶¤í˜• ë§¤ì¹­ ë¶„ì„ ì¤‘... ìµœì  ìƒëŒ€ íƒìƒ‰');
        log('ğŸ’– 4ë‹¨ê³„: ê°œì¸í™” ë§¤ì¹­ ê³„ì‚° ì‹œì‘');

        const testUser = {
          userId: userId,
          valueCategories: {
            family: 85,
            security: 75,
            health: 80,
            relationships: 90,
            spirituality: 65,
            growth: 70,
          },
          personalityScores: {
            agreeableness: 78,
            conscientiousness: 85,
            extroversion: 65,
            openness: 71,
            emotionalStability: 80,
            optimism: 75,
            empathy: 82,
          },
        };

        const targetUser = {
          userId: 'potential_match',
          valueCategories: {
            family: 88,
            security: 82,
            health: 75,
            relationships: 85,
            spirituality: 60,
            growth: 65,
          },
          personalityScores: {
            agreeableness: 85,
            conscientiousness: 78,
            extroversion: 60,
            openness: 68,
            emotionalStability: 85,
            optimism: 80,
            empathy: 88,
          },
        };

        log('âš™ï¸ ì‚¬ìš©ì í”„ë¡œí•„ê³¼ íƒ€ê²Ÿ í”„ë¡œí•„ ë¶„ì„ ì¤‘...');
        const personalizedResult = personalizationEngine.calculatePersonalizedScore(
          userId,
          testUser,
          targetUser
        );
        log(`ğŸ“Š ë§¤ì¹­ ì ìˆ˜ ê³„ì‚° ì™„ë£Œ: ${personalizedResult.finalScore.toFixed(1)}ì `);

        await new Promise(resolve => setTimeout(resolve, steps[3].duration));

        // 5. ê°œì¸ ì¸ì‚¬ì´íŠ¸ ìƒì„± (2.3ì´ˆ)
        loadingManager.nextStep('âœ¨ ê°œì¸ ë§ì¶¤ ë¶„ì„ ê²°ê³¼ ìƒì„± ì¤‘... ë‚˜ë§Œì˜ ì¸ì‚¬ì´íŠ¸ ì™„ì„±');
        log('âœ¨ 5ë‹¨ê³„: ì¸ì‚¬ì´íŠ¸ ìƒì„± ì‹œì‘');

        const insights = personalizationEngine.generatePersonalInsights(userId);
        log(`ğŸ¯ ê°œì¸í™” ë ˆë²¨: ${insights.level}, ì„±ê³µë¥ : ${insights.successRate}%`);

        await new Promise(resolve => setTimeout(resolve, steps[4].duration));

        const resultHTML = `
                <h4 style="color: #000000 !important; font-weight: 800 !important;">ğŸ¯ ê°œì¸í™” ë§¤ì¹­ ë¶„ì„ ì™„ë£Œ</h4>
                
                <div class="personalization-results">
                    <h5 style="color: #000000 !important; font-weight: 800 !important;">ğŸ’– ë§ì¶¤í˜• ë§¤ì¹­ ê²°ê³¼</h5>
                    <div class="score-comparison">
                        <div class="score-item">
                            <span class="score-label" style="color: #000000 !important; font-weight: 700 !important;">ê¸°ë³¸ ë§¤ì¹­ ì ìˆ˜:</span>
                            <span class="score-value" style="color: #dc2626 !important; font-weight: 800 !important;">${personalizedResult.baseScore.toFixed(
                              1
                            )}ì </span>
                        </div>
                        <div class="score-item highlight">
                            <span class="score-label" style="color: #000000 !important; font-weight: 700 !important;">ê°œì¸í™” ë§¤ì¹­ ì ìˆ˜:</span>
                            <span class="score-value" style="color: #dc2626 !important; font-weight: 800 !important;">${personalizedResult.personalizedScore.toFixed(
                              1
                            )}ì </span>
                        </div>
                        <div class="score-item">
                            <span class="score-label" style="color: #000000 !important; font-weight: 700 !important;">íˆìŠ¤í† ë¦¬ ë³´ì •:</span>
                            <span class="score-value" style="color: #059669 !important; font-weight: 800 !important;">${
                              personalizedResult.historyAdjustment > 0 ? '+' : ''
                            }${personalizedResult.historyAdjustment.toFixed(1)}ì </span>
                        </div>
                        <div class="score-item final">
                            <span class="score-label" style="color: #000000 !important; font-weight: 700 !important;">ìµœì¢… ì ìˆ˜:</span>
                            <span class="score-value" style="color: #7c3aed !important; font-weight: 800 !important; font-size: 1.2rem !important;">${personalizedResult.finalScore.toFixed(
                              1
                            )}ì </span>
                        </div>
                    </div>
                    
                    <div class="personalization-info">
                        <p style="color: #000000 !important; font-weight: 700 !important;"><strong>ê°œì¸í™” ìˆ˜ì¤€:</strong> ${
                          insights.level === 'learning'
                            ? 'í•™ìŠµ ì¤‘'
                            : insights.level === 'adaptive'
                            ? 'ì ì‘í˜•'
                            : 'ê¸°ë³¸'
                        }</p>
                        <p style="color: #000000 !important; font-weight: 700 !important;"><strong>ë¶„ì„ ì‹ ë¢°ë„:</strong> ${(
                          personalizedResult.confidence * 100
                        ).toFixed(0)}%</p>
                        <p style="color: #000000 !important; font-weight: 700 !important;"><strong>ë§¤ì¹­ íˆìŠ¤í† ë¦¬:</strong> ${
                          insights.totalMatches
                        }íšŒ</p>
                        <p style="color: #000000 !important; font-weight: 700 !important;"><strong>ì„±ê³µë¥ :</strong> ${
                          insights.successRate
                        }%</p>
                    </div>
                    
                    <h5 style="color: #000000 !important; font-weight: 800 !important;">ğŸ¯ ë‚˜ë§Œì˜ ì„ í˜¸ íŒ¨í„´</h5>
                    <div class="preference-patterns">
                        <div class="pattern-section">
                            <h6 style="color: #000000 !important; font-weight: 800 !important; font-size: 1rem !important;">ì¤‘ìš” ê°€ì¹˜ê´€ TOP 3</h6>
                            ${insights.topValues
                              .map(
                                v =>
                                  `<div class="pattern-item" style="color: #dc2626 !important; font-weight: 700 !important; font-size: 0.9rem !important;">${v.category}: ${v.weight}%</div>`
                              )
                              .join('')}
                        </div>
                        <div class="pattern-section">
                            <h6 style="color: #000000 !important; font-weight: 800 !important; font-size: 1rem !important;">ì„ í˜¸ ì„±ê²© TOP 3</h6>
                            ${insights.topPersonality
                              .map(
                                p =>
                                  `<div class="pattern-item" style="color: #dc2626 !important; font-weight: 700 !important; font-size: 0.9rem !important;">${p.trait}: ${p.weight}%</div>`
                              )
                              .join('')}
                        </div>
                    </div>
                    
                    <h5 style="color: #000000 !important; font-weight: 800 !important; font-size: 1.1rem !important;">ğŸ’¡ ê°œì¸ ë§ì¶¤ ì¶”ì²œ</h5>
                    <div class="recommendations">
                        ${insights.recommendations
                          .map(
                            rec =>
                              `<div class="recommendation-item" style="color: #059669 !important; font-weight: 700 !important; font-size: 0.9rem !important;">â€¢ ${rec}</div>`
                          )
                          .join('')}
                    </div>
                </div>
                
                <div class="improvement-highlight">
                    <h6>ğŸš€ ê°œì¸í™” ì‹œìŠ¤í…œ íš¨ê³¼</h6>
                    <p><strong>ì •í™•ë„ í–¥ìƒ:</strong> ${(
                      personalizedResult.personalizedScore - personalizedResult.baseScore
                    ).toFixed(1)}ì  ê°œì„ </p>
                    <p><strong>4060ì„¸ëŒ€ íŠ¹í™”:</strong> ì•ˆì •ì„±ê³¼ ì‹ ë¢°ì„± ì¤‘ì‹¬ ë§¤ì¹­</p>
                    <p><strong>ì§€ì†ì  í•™ìŠµ:</strong> ë§¤ì¹­í•  ë•Œë§ˆë‹¤ ë”ìš± ì •í™•í•´ì§‘ë‹ˆë‹¤</p>
                </div>
            `;

        // ë¡œë”© ì™„ë£Œ ë° ê²°ê³¼ í‘œì‹œ
        loadingManager.complete('ê°œì¸í™” ë§¤ì¹­ ë¶„ì„ ì™„ë£Œ! ë‚˜ë§Œì˜ ë§ì¶¤í˜• ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš” ğŸ’–');

        // ì ê¹ ëŒ€ê¸° í›„ ê²°ê³¼ í‘œì‹œ (ë¡œë”© UIê°€ ë³´ì´ë„ë¡)
        setTimeout(() => {
          showResult('personalizedResult', resultHTML, true);
          updateStatus(
            `âœ… ê°œì¸í™” ë§¤ì¹­ ì™„ë£Œ! ìµœì¢… ì ìˆ˜: ${personalizedResult.finalScore.toFixed(
              1
            )}ì  (ì‹ ë¢°ë„: ${(personalizedResult.confidence * 100).toFixed(0)}%)`
          );
        }, 500);
      }

      // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
      window.onload = function () {
        log('ğŸ¯ Phase 3 ë§¤ì¹­ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
        log('ğŸ’¡ ê° í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ Phase 3 ë§¤ì¹­ ì‹œìŠ¤í…œì„ ì²´í—˜í•´ë³´ì„¸ìš”!');
        log('ğŸŒŸ ìƒˆë¡œìš´ ê°œì¸í™” ì‹œìŠ¤í…œì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
        updateStatus('ğŸš€ Phase 3 ë§¤ì¹­ ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ! í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”.');
      };
    </script>
  </body>
</html>
