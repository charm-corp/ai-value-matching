<!DOCTYPE html>\n<html lang=\"ko\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>백엔드 연결 테스트 - CHARM_INYEON</title>\n    <style>\n        body {\n            font-family: \"Noto Sans KR\", sans-serif;\n            padding: 2rem;\n            background: #f8fafc;\n            line-height: 1.6;\n        }\n        \n        .test-container {\n            max-width: 800px;\n            margin: 0 auto;\n            background: white;\n            padding: 2rem;\n            border-radius: 15px;\n            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n        }\n        \n        .test-header {\n            text-align: center;\n            margin-bottom: 3rem;\n        }\n        \n        .test-header h1 {\n            color: #667eea;\n            margin-bottom: 1rem;\n        }\n        \n        .test-section {\n            margin-bottom: 2rem;\n            padding: 1.5rem;\n            border: 2px solid #e5e7eb;\n            border-radius: 12px;\n        }\n        \n        .test-button {\n            background: linear-gradient(135deg, #667eea, #764ba2);\n            color: white;\n            border: none;\n            padding: 0.75rem 1.5rem;\n            border-radius: 8px;\n            margin: 0.5rem;\n            cursor: pointer;\n            font-weight: 600;\n            transition: all 0.3s ease;\n        }\n        \n        .test-button:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);\n        }\n        \n        .result {\n            margin-top: 1rem;\n            padding: 1rem;\n            border-radius: 8px;\n            font-family: monospace;\n            white-space: pre-wrap;\n        }\n        \n        .success {\n            background: #d1fae5;\n            color: #065f46;\n            border: 1px solid #a7f3d0;\n        }\n        \n        .error {\n            background: #fef2f2;\n            color: #991b1b;\n            border: 1px solid #fecaca;\n        }\n        \n        .info {\n            background: #eff6ff;\n            color: #1e40af;\n            border: 1px solid #bfdbfe;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"test-container\">\n        <div class=\"test-header\">\n            <h1>🧪 백엔드 API 연결 테스트</h1>\n            <p>CHARM_INYEON 백엔드 시스템의 API 엔드포인트들을 테스트합니다.</p>\n        </div>\n        \n        <div class=\"test-section\">\n            <h2>🏥 서버 상태 확인</h2>\n            <button class=\"test-button\" onclick=\"testHealth()\">Health Check</button>\n            <button class=\"test-button\" onclick=\"testServerInfo()\">서버 정보</button>\n            <div id=\"healthResult\" class=\"result\" style=\"display: none;\"></div>\n        </div>\n        \n        <div class=\"test-section\">\n            <h2>🔐 인증 시스템 테스트</h2>\n            <button class=\"test-button\" onclick=\"testRegister()\">회원가입 테스트</button>\n            <button class=\"test-button\" onclick=\"testLogin()\">로그인 테스트</button>\n            <div id=\"authResult\" class=\"result\" style=\"display: none;\"></div>\n        </div>\n        \n        <div class=\"test-section\">\n            <h2>📊 가치관 설문 테스트</h2>\n            <button class=\"test-button\" onclick=\"testValues()\">설문 질문 가져오기</button>\n            <button class=\"test-button\" onclick=\"testSubmitValues()\">설문 제출 테스트</button>\n            <div id=\"valuesResult\" class=\"result\" style=\"display: none;\"></div>\n        </div>\n        \n        <div class=\"test-section\">\n            <h2>💕 매칭 시스템 테스트</h2>\n            <button class=\"test-button\" onclick=\"testMatching()\">매칭 알고리즘 테스트</button>\n            <div id=\"matchingResult\" class=\"result\" style=\"display: none;\"></div>\n        </div>\n    </div>\n    \n    <script>\n        const API_BASE = 'http://localhost:3000/api';\n        \n        // 서버 상태 확인\n        async function testHealth() {\n            const result = document.getElementById('healthResult');\n            result.style.display = 'block';\n            result.textContent = '⏳ 서버 상태 확인 중...';\n            result.className = 'result info';\n            \n            try {\n                const response = await fetch('http://localhost:3000/health');\n                const data = await response.json();\n                \n                result.textContent = `✅ 서버 상태: ${data.status}\\n환경: ${data.environment}\\n가동시간: ${Math.floor(data.uptime)}초\\n시간: ${data.timestamp}`;\n                result.className = 'result success';\n            } catch (error) {\n                result.textContent = `❌ 서버 연결 실패: ${error.message}\\n\\n💡 해결방법:\\n1. 터미널에서 'npm start' 실행\\n2. MongoDB 서버 실행 확인\\n3. 포트 3000번이 사용 가능한지 확인`;\n                result.className = 'result error';\n            }\n        }\n        \n        async function testServerInfo() {\n            const result = document.getElementById('healthResult');\n            result.style.display = 'block';\n            result.textContent = '⏳ 서버 정보 조회 중...';\n            result.className = 'result info';\n            \n            try {\n                const response = await fetch('http://localhost:3000/');\n                const data = await response.json();\n                \n                result.textContent = `📋 서버 정보:\\n서비스: ${data.message}\\n버전: ${data.version}\\nAPI 문서: ${data.documentation}\\n상태확인: ${data.health}`;\n                result.className = 'result success';\n            } catch (error) {\n                result.textContent = `❌ 서버 정보 조회 실패: ${error.message}`;\n                result.className = 'result error';\n            }\n        }\n        \n        // 인증 테스트\n        async function testRegister() {\n            const result = document.getElementById('authResult');\n            result.style.display = 'block';\n            result.textContent = '⏳ 회원가입 테스트 중...';\n            result.className = 'result info';\n            \n            const testUser = {\n                email: `test_${Date.now()}@example.com`,\n                password: 'TestPassword123!',\n                name: '테스트사용자',\n                age: '46-50',\n                gender: 'male',\n                location: '서울시 강남구',\n                agreeTerms: true,\n                agreePrivacy: true\n            };\n            \n            try {\n                const response = await fetch(`${API_BASE}/auth/register`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify(testUser)\n                });\n                \n                const data = await response.json();\n                \n                if (response.ok) {\n                    result.textContent = `✅ 회원가입 성공!\\n사용자 ID: ${data.user.id}\\n이름: ${data.user.name}\\n토큰: ${data.token ? '발급됨' : '없음'}`;\n                    result.className = 'result success';\n                    \n                    // 토큰 저장 (로그인 테스트용)\n                    if (data.token) {\n                        localStorage.setItem('testToken', data.token);\n                    }\n                } else {\n                    result.textContent = `⚠️ 회원가입 실패: ${data.error || data.message}\\n${data.details ? JSON.stringify(data.details, null, 2) : ''}`;\n                    result.className = 'result error';\n                }\n            } catch (error) {\n                result.textContent = `❌ 회원가입 요청 실패: ${error.message}`;\n                result.className = 'result error';\n            }\n        }\n        \n        async function testLogin() {\n            const result = document.getElementById('authResult');\n            result.style.display = 'block';\n            result.textContent = '⏳ 로그인 테스트 중...';\n            result.className = 'result info';\n            \n            const loginData = {\n                email: 'test@example.com',\n                password: 'TestPassword123!'\n            };\n            \n            try {\n                const response = await fetch(`${API_BASE}/auth/login`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify(loginData)\n                });\n                \n                const data = await response.json();\n                \n                if (response.ok) {\n                    result.textContent = `✅ 로그인 성공!\\n사용자: ${data.user.name}\\n이메일: ${data.user.email}\\n토큰: 발급됨`;\n                    result.className = 'result success';\n                    \n                    localStorage.setItem('testToken', data.token);\n                } else {\n                    result.textContent = `⚠️ 로그인 실패: ${data.error || data.message}\\n\\n📝 참고: 먼저 회원가입 테스트를 실행하세요.`;\n                    result.className = 'result error';\n                }\n            } catch (error) {\n                result.textContent = `❌ 로그인 요청 실패: ${error.message}`;\n                result.className = 'result error';\n            }\n        }\n        \n        // 가치관 설문 테스트\n        async function testValues() {\n            const result = document.getElementById('valuesResult');\n            result.style.display = 'block';\n            result.textContent = '⏳ 가치관 설문 질문 조회 중...';\n            result.className = 'result info';\n            \n            try {\n                const token = localStorage.getItem('testToken');\n                const headers = {\n                    'Content-Type': 'application/json'\n                };\n                \n                if (token) {\n                    headers['Authorization'] = `Bearer ${token}`;\n                }\n                \n                const response = await fetch(`${API_BASE}/values/questions`, {\n                    headers: headers\n                });\n                \n                const data = await response.json();\n                \n                if (response.ok) {\n                    result.textContent = `✅ 설문 질문 조회 성공!\\n질문 수: ${data.questions.length}개\\n\\n첫 번째 질문:\\n\"${data.questions[0].text}\"\\n\\n선택지 수: ${data.questions[0].options.length}개`;\n                    result.className = 'result success';\n                } else {\n                    result.textContent = `⚠️ 설문 조회 실패: ${data.error || data.message}`;\n                    result.className = 'result error';\n                }\n            } catch (error) {\n                result.textContent = `❌ 설문 조회 요청 실패: ${error.message}`;\n                result.className = 'result error';\n            }\n        }\n        \n        async function testSubmitValues() {\n            const result = document.getElementById('valuesResult');\n            result.style.display = 'block';\n            result.textContent = '⏳ 설문 제출 테스트 중...';\n            result.className = 'result info';\n            \n            const testAnswers = {\n                answers: [\n                    { questionId: 1, selectedValue: 'family' },\n                    { questionId: 2, selectedValue: 'quiet' },\n                    { questionId: 3, selectedValue: 'logic' }\n                ]\n            };\n            \n            try {\n                const token = localStorage.getItem('testToken');\n                if (!token) {\n                    result.textContent = '⚠️ 로그인이 필요합니다. 먼저 로그인 테스트를 실행하세요.';\n                    result.className = 'result error';\n                    return;\n                }\n                \n                const response = await fetch(`${API_BASE}/values/submit`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': `Bearer ${token}`\n                    },\n                    body: JSON.stringify(testAnswers)\n                });\n                \n                const data = await response.json();\n                \n                if (response.ok) {\n                    result.textContent = `✅ 설문 제출 성공!\\n분석 ID: ${data.assessmentId}\\n완료 시간: ${new Date(data.completedAt).toLocaleString()}\\n\\n가치관 점수 (예시):\\n가족 중심: ${data.results?.scores?.family || 'N/A'}\\n안정 추구: ${data.results?.scores?.stability || 'N/A'}`;\n                    result.className = 'result success';\n                } else {\n                    result.textContent = `⚠️ 설문 제출 실패: ${data.error || data.message}`;\n                    result.className = 'result error';\n                }\n            } catch (error) {\n                result.textContent = `❌ 설문 제출 요청 실패: ${error.message}`;\n                result.className = 'result error';\n            }\n        }\n        \n        // 매칭 테스트\n        async function testMatching() {\n            const result = document.getElementById('matchingResult');\n            result.style.display = 'block';\n            result.textContent = '⏳ 매칭 알고리즘 테스트 중...';\n            result.className = 'result info';\n            \n            try {\n                const token = localStorage.getItem('testToken');\n                if (!token) {\n                    result.textContent = '⚠️ 로그인이 필요합니다. 먼저 로그인 테스트를 실행하세요.';\n                    result.className = 'result error';\n                    return;\n                }\n                \n                const response = await fetch(`${API_BASE}/matching/find`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': `Bearer ${token}`\n                    },\n                    body: JSON.stringify({\n                        preferences: {\n                            minAge: 40,\n                            maxAge: 60,\n                            location: '서울시',\n                            interests: ['독서', '영화', '산책']\n                        }\n                    })\n                });\n                \n                const data = await response.json();\n                \n                if (response.ok) {\n                    result.textContent = `✅ 매칭 테스트 성공!\\n매칭 수: ${data.matches?.length || 0}개\\n알고리즘: ${data.algorithm || '기본'}\\n처리 시간: ${data.processingTime || 'N/A'}ms`;\n                    result.className = 'result success';\n                } else {\n                    result.textContent = `⚠️ 매칭 실패: ${data.error || data.message}`;\n                    result.className = 'result error';\n                }\n            } catch (error) {\n                result.textContent = `❌ 매칭 요청 실패: ${error.message}`;\n                result.className = 'result error';\n            }\n        }\n        \n        // 페이지 로드 시 자동으로 서버 상태 확인\n        window.addEventListener('load', () => {\n            setTimeout(testHealth, 1000);\n        });\n    </script>\n</body>\n</html>